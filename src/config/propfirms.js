/**
 * @fileoverview PropFirm API Configurations - Synced with Admin Dashboard
 * @module config/propfirms
 */

/**
 * PropFirm configurations
 * Synced with: /root/HQX-Dev/hqx_tg/src/propfirms/config.ts
 */
const PROPFIRMS = {
  // ==================== ProjectX Platform ====================
  topstep: {
    id: 'topstepx',
    name: 'TopStep',
    displayName: 'TopStep',
    platform: 'ProjectX',
    userApi: 'userapi.topstepx.com',
    gatewayApi: 'api.topstepx.com'
  },
  alpha_futures: {
    id: 'alphafutures',
    name: 'Alpha Futures',
    displayName: 'Alpha Futures',
    platform: 'ProjectX',
    userApi: 'userapi.alphafutures.projectx.com',
    gatewayApi: 'api.alphafutures.projectx.com'
  },
  tickticktrader: {
    id: 'tickticktrader',
    name: 'TickTickTrader',
    displayName: 'TickTickTrader',
    platform: 'ProjectX',
    userApi: 'userapi.tickticktrader.projectx.com',
    gatewayApi: 'api.tickticktrader.projectx.com'
  },
  bulenox: {
    id: 'bulenox',
    name: 'Bulenox',
    displayName: 'Bulenox',
    platform: 'ProjectX',
    userApi: 'userapi.bulenox.projectx.com',
    gatewayApi: 'api.bulenox.projectx.com'
  },
  tradeday: {
    id: 'tradeday',
    name: 'TradeDay',
    displayName: 'TradeDay',
    platform: 'ProjectX',
    userApi: 'userapi.tradeday.projectx.com',
    gatewayApi: 'api.tradeday.projectx.com'
  },
  blusky: {
    id: 'blusky',
    name: 'Blusky',
    displayName: 'Blusky',
    platform: 'ProjectX',
    userApi: 'userapi.blusky.projectx.com',
    gatewayApi: 'api.blusky.projectx.com'
  },
  goat_futures: {
    id: 'goatfutures',
    name: 'Goat Futures',
    displayName: 'Goat Futures',
    platform: 'ProjectX',
    userApi: 'userapi.goatfutures.projectx.com',
    gatewayApi: 'api.goatfutures.projectx.com'
  },
  futures_desk: {
    id: 'thefuturesdesk',
    name: 'The Futures Desk',
    displayName: 'The Futures Desk',
    platform: 'ProjectX',
    userApi: 'userapi.thefuturesdesk.projectx.com',
    gatewayApi: 'api.thefuturesdesk.projectx.com'
  },
  daytraders: {
    id: 'daytraders',
    name: 'DayTraders',
    displayName: 'DayTraders',
    platform: 'ProjectX',
    userApi: 'userapi.daytraders.projectx.com',
    gatewayApi: 'api.daytraders.projectx.com'
  },
  e8_futures: {
    id: 'e8futures',
    name: 'E8 Futures',
    displayName: 'E8 Futures',
    platform: 'ProjectX',
    userApi: 'userapi.e8futures.projectx.com',
    gatewayApi: 'api.e8futures.projectx.com'
  },
  blue_guardian: {
    id: 'blueguardianfutures',
    name: 'Blue Guardian Futures',
    displayName: 'Blue Guardian Futures',
    platform: 'ProjectX',
    userApi: 'userapi.blueguardianfutures.projectx.com',
    gatewayApi: 'api.blueguardianfutures.projectx.com'
  },
  futures_elite: {
    id: 'futureselite',
    name: 'FuturesElite',
    displayName: 'FuturesElite',
    platform: 'ProjectX',
    userApi: 'userapi.futureselite.projectx.com',
    gatewayApi: 'api.futureselite.projectx.com'
  },
  fxify: {
    id: 'fxify',
    name: 'FXIFY',
    displayName: 'FXIFY',
    platform: 'ProjectX',
    userApi: 'userapi.fxify.projectx.com',
    gatewayApi: 'api.fxify.projectx.com'
  },
  hola_prime: {
    id: 'holaprime',
    name: 'Hola Prime',
    displayName: 'Hola Prime',
    platform: 'ProjectX',
    userApi: 'userapi.holaprime.projectx.com',
    gatewayApi: 'api.holaprime.projectx.com'
  },
  top_one_futures: {
    id: 'toponefutures',
    name: 'Top One Futures',
    displayName: 'Top One Futures',
    platform: 'ProjectX',
    userApi: 'userapi.toponefutures.projectx.com',
    gatewayApi: 'api.toponefutures.projectx.com'
  },
  funding_futures: {
    id: 'fundingfutures',
    name: 'Funding Futures',
    displayName: 'Funding Futures',
    platform: 'ProjectX',
    userApi: 'userapi.fundingfutures.projectx.com',
    gatewayApi: 'api.fundingfutures.projectx.com'
  },
  tx3_funding: {
    id: 'tx3funding',
    name: 'TX3 Funding',
    displayName: 'TX3 Funding',
    platform: 'ProjectX',
    userApi: 'userapi.tx3funding.projectx.com',
    gatewayApi: 'api.tx3funding.projectx.com'
  },
  lucid_trading: {
    id: 'lucidtrading',
    name: 'Lucid Trading',
    displayName: 'Lucid Trading',
    platform: 'ProjectX',
    userApi: 'userapi.lucidtrading.projectx.com',
    gatewayApi: 'api.lucidtrading.projectx.com'
  },
  tradeify: {
    id: 'tradeify',
    name: 'Tradeify',
    displayName: 'Tradeify',
    platform: 'ProjectX',
    userApi: 'userapi.tradeify.projectx.com',
    gatewayApi: 'api.tradeify.projectx.com'
  },

  // ==================== Tradovate Platform ====================
  apex_tradovate: {
    id: 'apex',
    name: 'Apex',
    displayName: 'Apex (Tradovate)',
    platform: 'Tradovate',
    userApi: 'userapi.apex.tradovate.com',
    gatewayApi: 'api.apex.tradovate.com'
  },
  takeprofittrader: {
    id: 'takeprofittrader',
    name: 'TakeProfitTrader',
    displayName: 'TakeProfitTrader',
    platform: 'Tradovate',
    userApi: 'userapi.takeprofittrader.tradovate.com',
    gatewayApi: 'api.takeprofittrader.tradovate.com'
  },
  myfundedfutures: {
    id: 'myfundedfutures',
    name: 'MyFundedFutures',
    displayName: 'MyFundedFutures',
    platform: 'Tradovate',
    userApi: 'live.tradovateapi.com',
    gatewayApi: 'live.tradovateapi.com'
  },

  // ==================== Rithmic Platform ====================
  apex_rithmic: {
    id: 'rithmic-apex',
    name: 'Apex',
    displayName: 'Apex (Rithmic)',
    platform: 'Rithmic',
    rithmicSystem: 'Apex',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443',
    defaultStartingBalance: 300000
  },
  topsteptrader: {
    id: 'topsteptrader',
    name: 'TopstepTrader',
    displayName: 'TopstepTrader',
    platform: 'Rithmic',
    rithmicSystem: 'TopstepTrader',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  mes_capital: {
    id: 'mes-capital',
    name: 'MES Capital',
    displayName: 'MES Capital',
    platform: 'Rithmic',
    rithmicSystem: 'MES Capital',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  bulenox_rithmic: {
    id: 'rithmic-bulenox',
    name: 'Bulenox',
    displayName: 'Bulenox (Rithmic)',
    platform: 'Rithmic',
    rithmicSystem: 'Bulenox',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  tradefundrr: {
    id: 'tradefundrr',
    name: 'TradeFundrr',
    displayName: 'TradeFundrr',
    platform: 'Rithmic',
    rithmicSystem: 'TradeFundrr',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  thetradingpit: {
    id: 'thetradingpit',
    name: 'TheTradingPit',
    displayName: 'TheTradingPit',
    platform: 'Rithmic',
    rithmicSystem: 'TheTradingPit',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  fundedfuturesnetwork: {
    id: 'fundedfuturesnetwork',
    name: 'FundedFuturesNetwork',
    displayName: 'FundedFuturesNetwork',
    platform: 'Rithmic',
    rithmicSystem: 'FundedFuturesNetwork',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  propshoptrader: {
    id: 'propshoptrader',
    name: 'PropShopTrader',
    displayName: 'PropShopTrader',
    platform: 'Rithmic',
    rithmicSystem: 'PropShopTrader',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  fourproptrader: {
    id: '4proptrader',
    name: '4PropTrader',
    displayName: '4PropTrader',
    platform: 'Rithmic',
    rithmicSystem: '4PropTrader',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  daytraders_rithmic: {
    id: 'rithmic-daytraders',
    name: 'DayTraders.com',
    displayName: 'DayTraders.com (Rithmic)',
    platform: 'Rithmic',
    rithmicSystem: 'DayTraders.com',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  tenxfutures: {
    id: '10xfutures',
    name: '10XFutures',
    displayName: '10XFutures',
    platform: 'Rithmic',
    rithmicSystem: '10XFutures',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  lucidtrading_rithmic: {
    id: 'rithmic-lucidtrading',
    name: 'LucidTrading',
    displayName: 'LucidTrading (Rithmic)',
    platform: 'Rithmic',
    rithmicSystem: 'LucidTrading',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  thrivetrading: {
    id: 'thrivetrading',
    name: 'ThriveTrading',
    displayName: 'ThriveTrading',
    platform: 'Rithmic',
    rithmicSystem: 'ThriveTrading',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  legendstrading: {
    id: 'legendstrading',
    name: 'LegendsTrading',
    displayName: 'LegendsTrading',
    platform: 'Rithmic',
    rithmicSystem: 'LegendsTrading',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  earn2trade: {
    id: 'earn2trade',
    name: 'Earn2Trade',
    displayName: 'Earn2Trade',
    platform: 'Rithmic',
    rithmicSystem: 'Earn2Trade',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  },
  tradesea: {
    id: 'tradesea',
    name: 'Tradesea',
    displayName: 'Tradesea',
    platform: 'Rithmic',
    rithmicSystem: 'tradesea',
    wsEndpoint: 'wss://ritpa11120.11.rithmic.com:443'
  }
};

/**
 * PropFirm choices for menus (grouped by platform)
 */
const PROPFIRM_CHOICES = {
  projectx: Object.entries(PROPFIRMS)
    .filter(([_, v]) => v.platform === 'ProjectX')
    .map(([key, val]) => ({ name: val.displayName, value: key })),
  
  tradovate: Object.entries(PROPFIRMS)
    .filter(([_, v]) => v.platform === 'Tradovate')
    .map(([key, val]) => ({ name: val.displayName, value: key })),
  
  rithmic: Object.entries(PROPFIRMS)
    .filter(([_, v]) => v.platform === 'Rithmic')
    .map(([key, val]) => ({ name: val.displayName, value: key })),
  
  all: Object.entries(PROPFIRMS)
    .map(([key, val]) => ({ name: `${val.displayName} (${val.platform})`, value: key }))
};

/**
 * Gets a PropFirm by key
 * @param {string} key - PropFirm key
 * @returns {Object|undefined} PropFirm config
 */
const getPropFirm = (key) => PROPFIRMS[key];

/**
 * Gets PropFirm by ID (synced with dashboard)
 * @param {string} id - PropFirm ID
 * @returns {Object|undefined} PropFirm config
 */
const getPropFirmById = (id) => {
  return Object.values(PROPFIRMS).find(pf => pf.id === id);
};

/**
 * Gets all PropFirms for a platform
 * @param {string} platform - Platform name (ProjectX, Tradovate, Rithmic)
 * @returns {Array} PropFirm configs
 */
const getPropFirmsByPlatform = (platform) => {
  return Object.entries(PROPFIRMS)
    .filter(([_, v]) => v.platform === platform)
    .map(([key, val]) => ({ key, ...val }));
};

module.exports = { 
  PROPFIRMS, 
  PROPFIRM_CHOICES,
  getPropFirm,
  getPropFirmById,
  getPropFirmsByPlatform
};
