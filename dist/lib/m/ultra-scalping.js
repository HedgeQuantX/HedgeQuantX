const _0x574846=_0x2aaf;(function(_0x49e593,_0xd5bbb){const _0x182fe8=_0x2aaf,_0x5e247b=_0x49e593();while(!![]){try{const _0x23b4df=-parseInt(_0x182fe8(0xff))/0x1+parseInt(_0x182fe8(0x128))/0x2+parseInt(_0x182fe8(0x129))/0x3*(parseInt(_0x182fe8(0xe1))/0x4)+parseInt(_0x182fe8(0x125))/0x5*(-parseInt(_0x182fe8(0x110))/0x6)+-parseInt(_0x182fe8(0xdc))/0x7+parseInt(_0x182fe8(0x10d))/0x8*(-parseInt(_0x182fe8(0xed))/0x9)+parseInt(_0x182fe8(0xf7))/0xa;if(_0x23b4df===_0xd5bbb)break;else _0x5e247b['push'](_0x5e247b['shift']());}catch(_0x43e1e5){_0x5e247b['push'](_0x5e247b['shift']());}}}(_0xe7f5,0xd3cce));const EventEmitter=require('events'),{v4:uuidv4}=require(_0x574846(0x11f)),OrderSide={'BID':0x0,'ASK':0x1},SignalStrength={'WEAK':0x1,'MODERATE':0x2,'STRONG':0x3,'VERY_STRONG':0x4};class HQXUltraScalping extends EventEmitter{constructor(_0x9c23af={}){const _0x432530=_0x574846;super(),this['tickSize']=_0x9c23af[_0x432530(0x107)]||0.25,this[_0x432530(0xfe)]=_0x9c23af[_0x432530(0xfe)]||0x5,this['zscoreEntryThreshold']=1.5,this['zscoreExitThreshold']=0.5,this[_0x432530(0x139)]=0x32,this[_0x432530(0x113)]=0.7,this['kalmanProcessNoise']=0.01,this[_0x432530(0xd4)]=0.1,this[_0x432530(0x10e)]=0x64,this[_0x432530(0x12c)]=0x14,this['baseStopTicks']=0x8,this[_0x432530(0xe9)]=0x10,this[_0x432530(0x127)]=0x4,this[_0x432530(0x105)]=0.5,this['minConfidence']=0.55,this['weights']={'zscore':0.3,'ofi':0.2,'vpin':0.15,'kalman':0.15,'kyleLambda':0.1,'volatility':0.1},this[_0x432530(0x12a)]=new Map(),this[_0x432530(0x114)]=new Map(),this[_0x432530(0xf0)]=new Map(),this[_0x432530(0xfc)]=new Map(),this[_0x432530(0x133)]=new Map(),this[_0x432530(0x104)]=[],this['winStreak']=0x0,this[_0x432530(0xf1)]=0x0,this['lastSignalTime']=0x0,this['cooldownMs']=0x7530,this[_0x432530(0x10c)]=0x2710,this['stats']={'signals':0x0,'trades':0x0,'wins':0x0,'losses':0x0,'pnl':0x0};}[_0x574846(0xfb)](_0x38e8a5,_0x5cce21=0.25,_0x44bd84=0x5){const _0x121888=_0x574846;this[_0x121888(0x107)]=_0x5cce21,this[_0x121888(0xfe)]=_0x44bd84,this['barHistory']['set'](_0x38e8a5,[]),this['priceBuffer']['set'](_0x38e8a5,[]),this['volumeBuffer'][_0x121888(0xe8)](_0x38e8a5,[]),this[_0x121888(0x133)]['set'](_0x38e8a5,[]),this[_0x121888(0xfc)]['set'](_0x38e8a5,{'estimate':0x0,'errorCovariance':0x1}),this['emit']('log',{'type':'info','message':'[HQX-UltraScalping]\x20Initialized\x20for\x20'+_0x38e8a5+':\x20tick='+_0x5cce21+',\x20value='+_0x44bd84}),this[_0x121888(0x10f)](_0x121888(0xd3),{'type':'info','message':_0x121888(0x108)});}['processTick'](_0x9c374b){const {contractId:_0x26ec77,price:_0x1b2788,volume:_0x436bc4,side:_0xe1a0c2,timestamp:_0x1291a}=_0x9c374b,_0x30675d={'timestamp':_0x1291a||Date['now'](),'open':_0x1b2788,'high':_0x1b2788,'low':_0x1b2788,'close':_0x1b2788,'volume':_0x436bc4||0x1};return this['processBar'](_0x26ec77,_0x30675d);}[_0x574846(0x112)](_0x1b2861){return this['processTick'](_0x1b2861);}[_0x574846(0xca)](_0x48622c){const _0x587e37=_0x574846;return this['processTick']({'contractId':_0x48622c['contractId']||_0x48622c[_0x587e37(0xe2)],'price':_0x48622c['price'],'volume':_0x48622c['size']||_0x48622c['volume']||0x1,'side':_0x48622c[_0x587e37(0x134)],'timestamp':_0x48622c['timestamp']||Date['now']()});}[_0x574846(0x124)](_0x5d48ab,_0xd1cc00){const _0x5a96d6=_0x574846;let _0x4f7b92=this[_0x5a96d6(0x12a)][_0x5a96d6(0xe4)](_0x5d48ab);!_0x4f7b92&&(this['initialize'](_0x5d48ab),_0x4f7b92=this['barHistory']['get'](_0x5d48ab));_0x4f7b92['push'](_0xd1cc00);if(_0x4f7b92['length']>0x1f4)_0x4f7b92[_0x5a96d6(0x12b)]();const _0x200bf8=this[_0x5a96d6(0x114)][_0x5a96d6(0xe4)](_0x5d48ab);_0x200bf8['push'](_0xd1cc00['close']);if(_0x200bf8['length']>0xc8)_0x200bf8[_0x5a96d6(0x12b)]();const _0x193680=this['volumeBuffer']['get'](_0x5d48ab),_0x3d7e50=_0xd1cc00[_0x5a96d6(0x13c)]-_0xd1cc00['low'];let _0x4d6ede=_0xd1cc00['volume']*0.5,_0x5a71cf=_0xd1cc00['volume']*0.5;if(_0x3d7e50>0x0){const _0x54faf3=(_0xd1cc00['close']-_0xd1cc00['low'])/_0x3d7e50;_0x4d6ede=_0xd1cc00['volume']*_0x54faf3,_0x5a71cf=_0xd1cc00['volume']*(0x1-_0x54faf3);}_0x193680['push']({'buy':_0x4d6ede,'sell':_0x5a71cf});if(_0x193680['length']>0x64)_0x193680[_0x5a96d6(0x12b)]();if(_0x4f7b92['length']<0x32)return null;const _0x1ab3c8=this[_0x5a96d6(0x135)](_0x200bf8),_0x344bb6=this['_computeVPIN'](_0x193680),_0x3688b9=this[_0x5a96d6(0xd8)](_0x4f7b92),_0x22674c=this[_0x5a96d6(0xeb)](_0x5d48ab,_0xd1cc00[_0x5a96d6(0x126)]),{regime:_0x1cc967,params:_0x243671}=this['_detectVolatilityRegime'](_0x5d48ab,_0x4f7b92),_0x4e1878=this[_0x5a96d6(0x13b)](_0x4f7b92);return this[_0x5a96d6(0x123)](_0x5d48ab,_0xd1cc00[_0x5a96d6(0x126)],_0x1ab3c8,_0x344bb6,_0x3688b9,_0x22674c,_0x1cc967,_0x243671,_0x4e1878,_0x4f7b92);}[_0x574846(0x135)](_0xa3f93c,_0x1d860e=0x32){const _0x58e785=_0x574846;if(_0xa3f93c['length']<_0x1d860e)return 0x0;const _0x45082a=_0xa3f93c['slice'](-_0x1d860e),_0x254da2=_0x45082a['reduce']((_0x81a4e,_0x139b3d)=>_0x81a4e+_0x139b3d,0x0)/_0x1d860e,_0x8d6240=_0x45082a['reduce']((_0x361a69,_0x3c67fa)=>_0x361a69+Math['pow'](_0x3c67fa-_0x254da2,0x2),0x0)/_0x1d860e,_0x4a88fc=Math['sqrt'](_0x8d6240);if(_0x4a88fc<0.0001)return 0x0;const _0x2b6c7a=_0xa3f93c[_0xa3f93c[_0x58e785(0x12e)]-0x1];return(_0x2b6c7a-_0x254da2)/_0x4a88fc;}[_0x574846(0xef)](_0x5634bc){const _0x1d3160=_0x574846;if(_0x5634bc['length']<this[_0x1d3160(0x139)])return 0.5;const _0x54fbba=_0x5634bc[_0x1d3160(0x103)](-this[_0x1d3160(0x139)]);let _0x39d73a=0x0,_0x5f1e4f=0x0;for(const _0x5a670c of _0x54fbba){_0x39d73a+=_0x5a670c[_0x1d3160(0x117)],_0x5f1e4f+=_0x5a670c[_0x1d3160(0xd5)];}const _0x265bda=_0x39d73a+_0x5f1e4f;if(_0x265bda<0x1)return 0.5;return Math[_0x1d3160(0x131)](_0x39d73a-_0x5f1e4f)/_0x265bda;}['_computeKyleLambda'](_0x269d9a){const _0xe98788=_0x574846;if(_0x269d9a[_0xe98788(0x12e)]<0x14)return 0x0;const _0x1ce777=_0x269d9a['slice'](-0x14),_0x53a419=[],_0x45b0f6=[];for(let _0xc055f4=0x1;_0xc055f4<_0x1ce777['length'];_0xc055f4++){_0x53a419[_0xe98788(0x13d)](_0x1ce777[_0xc055f4][_0xe98788(0x126)]-_0x1ce777[_0xc055f4-0x1][_0xe98788(0x126)]),_0x45b0f6['push'](_0x1ce777[_0xc055f4]['volume']);}const _0x40b11c=_0x53a419['reduce']((_0x4362aa,_0x1c4b29)=>_0x4362aa+_0x1c4b29,0x0)/_0x53a419[_0xe98788(0x12e)],_0x23968f=_0x45b0f6[_0xe98788(0x100)]((_0x4889a3,_0x12c82c)=>_0x4889a3+_0x12c82c,0x0)/_0x45b0f6['length'];let _0x18c8e6=0x0,_0x469826=0x0;for(let _0x5d474b=0x0;_0x5d474b<_0x53a419['length'];_0x5d474b++){_0x18c8e6+=(_0x53a419[_0x5d474b]-_0x40b11c)*(_0x45b0f6[_0x5d474b]-_0x23968f),_0x469826+=Math['pow'](_0x45b0f6[_0x5d474b]-_0x23968f,0x2);}_0x18c8e6/=_0x53a419[_0xe98788(0x12e)],_0x469826/=_0x53a419[_0xe98788(0x12e)];if(_0x469826<0.0001)return 0x0;return Math['abs'](_0x18c8e6/_0x469826);}['_applyKalmanFilter'](_0x2b387e,_0x2bc328){const _0x413d6b=_0x574846;let _0x2e2fcc=this[_0x413d6b(0xfc)][_0x413d6b(0xe4)](_0x2b387e);if(!_0x2e2fcc)return _0x2e2fcc={'estimate':_0x2bc328,'errorCovariance':0x1},this[_0x413d6b(0xfc)]['set'](_0x2b387e,_0x2e2fcc),_0x2bc328;const _0xa07f3f=_0x2e2fcc[_0x413d6b(0x118)],_0x1a058f=_0x2e2fcc[_0x413d6b(0xdb)]+this['kalmanProcessNoise'],_0x244f8f=_0x1a058f/(_0x1a058f+this['kalmanMeasurementNoise']),_0x49b399=_0xa07f3f+_0x244f8f*(_0x2bc328-_0xa07f3f),_0x42a81f=(0x1-_0x244f8f)*_0x1a058f;return _0x2e2fcc[_0x413d6b(0x118)]=_0x49b399,_0x2e2fcc[_0x413d6b(0xdb)]=_0x42a81f,_0x49b399;}[_0x574846(0xf5)](_0x485353,_0x847e1f){const _0x28601d=_0x574846,_0x21251b=this['_calculateATR'](_0x847e1f),_0x36c4a8=_0x21251b/this[_0x28601d(0x107)];let _0x48142c=this[_0x28601d(0x133)]['get'](_0x485353);!_0x48142c&&(_0x48142c=[],this[_0x28601d(0x133)]['set'](_0x485353,_0x48142c));_0x48142c['push'](_0x21251b);if(_0x48142c['length']>0x1f4)_0x48142c['shift']();let _0x19d7a7=0.5;_0x48142c[_0x28601d(0x12e)]>=0x14&&(_0x19d7a7=_0x48142c['filter'](_0x3cb265=>_0x3cb265<=_0x21251b)['length']/_0x48142c[_0x28601d(0x12e)]);let _0x56f354,_0x2462d6;if(_0x19d7a7<0.25)_0x56f354=_0x28601d(0x116),_0x2462d6={'stopMultiplier':0.8,'targetMultiplier':0.9,'zscoreThreshold':1.2,'confidenceBonus':0.05};else _0x19d7a7<0.75?(_0x56f354='normal',_0x2462d6={'stopMultiplier':0x1,'targetMultiplier':0x1,'zscoreThreshold':1.5,'confidenceBonus':0x0}):(_0x56f354=_0x28601d(0x13c),_0x2462d6={'stopMultiplier':1.3,'targetMultiplier':1.2,'zscoreThreshold':0x2,'confidenceBonus':-0.05});return{'regime':_0x56f354,'params':_0x2462d6};}[_0x574846(0xdd)](_0xc3530b,_0x253793=0xe){const _0x1d74c4=_0x574846;if(_0xc3530b['length']<_0x253793+0x1)return 2.5;const _0x4cdb65=[];for(let _0x2ac401=_0xc3530b['length']-_0x253793;_0x2ac401<_0xc3530b[_0x1d74c4(0x12e)];_0x2ac401++){const _0x10ee9d=_0xc3530b[_0x2ac401],_0xbc0bde=_0xc3530b[_0x2ac401-0x1]['close'],_0x4756d9=Math[_0x1d74c4(0x120)](_0x10ee9d['high']-_0x10ee9d['low'],Math['abs'](_0x10ee9d[_0x1d74c4(0x13c)]-_0xbc0bde),Math[_0x1d74c4(0x131)](_0x10ee9d['low']-_0xbc0bde));_0x4cdb65['push'](_0x4756d9);}return _0x4cdb65['reduce']((_0x5dcc67,_0x200f65)=>_0x5dcc67+_0x200f65,0x0)/_0x4cdb65[_0x1d74c4(0x12e)];}[_0x574846(0x13b)](_0x17e29e){const _0x3242e2=_0x574846;if(_0x17e29e['length']<this[_0x3242e2(0x12c)])return 0x0;const _0x2da2cf=_0x17e29e['slice'](-this['ofiLookback']);let _0x41367e=0x0,_0x19fb67=0x0;for(const _0x560317 of _0x2da2cf){const _0xb266a2=_0x560317[_0x3242e2(0x13c)]-_0x560317['low'];if(_0xb266a2>0x0){const _0xee5fef=(_0x560317[_0x3242e2(0x126)]-_0x560317['low'])/_0xb266a2;_0x41367e+=_0xee5fef*_0x560317['volume'],_0x19fb67+=(0x1-_0xee5fef)*_0x560317[_0x3242e2(0xf4)];}}const _0x463757=_0x41367e+_0x19fb67;if(_0x463757<0x1)return 0x0;return(_0x41367e-_0x19fb67)/_0x463757;}['_generateSignal'](_0x299b56,_0xd9305d,_0x105389,_0x2fdbf2,_0x1c07b7,_0x34c8eb,_0x549d83,_0x356b4d,_0x2c5fdc,_0xdd26bb){const _0x52a91c=_0x574846,_0x5dcd9b=Math['abs'](_0x105389);if(_0x5dcd9b<_0x356b4d['zscoreThreshold'])return null;if(_0x2fdbf2>this[_0x52a91c(0x113)])return null;let _0x1c0923;if(_0x105389<-_0x356b4d[_0x52a91c(0x12f)])_0x1c0923=_0x52a91c(0xf3);else{if(_0x105389>_0x356b4d['zscoreThreshold'])_0x1c0923=_0x52a91c(0x13e);else return null;}const _0x5de0e9=_0x1c0923==='long'&&_0x2c5fdc>0.1||_0x1c0923===_0x52a91c(0x13e)&&_0x2c5fdc<-0.1,_0x3b8551=_0xd9305d-_0x34c8eb,_0x129719=_0x1c0923===_0x52a91c(0xf3)&&_0x3b8551<0x0||_0x1c0923===_0x52a91c(0x13e)&&_0x3b8551>0x0,_0x51ee42={'zscore':Math['min'](0x1,_0x5dcd9b/0x4),'vpin':0x1-_0x2fdbf2,'kyleLambda':_0x1c07b7>0.001?0.5:0.8,'kalman':_0x129719?0.8:0.4,'volatility':_0x549d83==='normal'?0.8:_0x549d83===_0x52a91c(0x116)?0.7:0.6,'ofi':_0x5de0e9?0.9:0.5,'composite':0x0};_0x51ee42[_0x52a91c(0xd0)]=_0x51ee42[_0x52a91c(0x115)]*this['weights']['zscore']+_0x51ee42['vpin']*this[_0x52a91c(0x119)][_0x52a91c(0x11b)]+_0x51ee42['kyleLambda']*this['weights']['kyleLambda']+_0x51ee42['kalman']*this[_0x52a91c(0x119)][_0x52a91c(0xee)]+_0x51ee42[_0x52a91c(0x11c)]*this[_0x52a91c(0x119)][_0x52a91c(0x11c)]+_0x51ee42[_0x52a91c(0x136)]*this['weights'][_0x52a91c(0x136)];const _0x5830d2=Math['min'](0x1,_0x51ee42[_0x52a91c(0xd0)]+_0x356b4d[_0x52a91c(0x11e)]);if(_0x5830d2<this[_0x52a91c(0xf8)])return null;if(Date[_0x52a91c(0x130)]()-this[_0x52a91c(0xcb)]<this[_0x52a91c(0xd6)])return null;const _0x350f08=Math[_0x52a91c(0xe0)](this['baseStopTicks']*_0x356b4d['stopMultiplier']),_0x1087e5=Math[_0x52a91c(0xe0)](this[_0x52a91c(0xe9)]*_0x356b4d['targetMultiplier']),_0x1c7235=Math[_0x52a91c(0x120)](0x6,Math['min'](0xc,_0x350f08)),_0x13969a=Math['max'](_0x1c7235*1.5,Math[_0x52a91c(0xd9)](0x18,_0x1087e5));let _0x3af560,_0x2f2c2a,_0x1bea8a,_0x2bd835;_0x1c0923==='long'?(_0x3af560=_0xd9305d-_0x1c7235*this['tickSize'],_0x2f2c2a=_0xd9305d+_0x13969a*this[_0x52a91c(0x107)],_0x1bea8a=_0xd9305d+this[_0x52a91c(0x127)]*this[_0x52a91c(0x107)],_0x2bd835=_0xd9305d+_0x13969a*this[_0x52a91c(0x105)]*this[_0x52a91c(0x107)]):(_0x3af560=_0xd9305d+_0x1c7235*this[_0x52a91c(0x107)],_0x2f2c2a=_0xd9305d-_0x13969a*this['tickSize'],_0x1bea8a=_0xd9305d-this['breakevenTicks']*this['tickSize'],_0x2bd835=_0xd9305d-_0x13969a*this['profitLockPct']*this[_0x52a91c(0x107)]);const _0x48f653=_0x13969a/_0x1c7235,_0xed111b=Math['round'](_0x13969a*0.5),_0x7ff7c7=Math[_0x52a91c(0xe0)](_0x1c7235*0.4);let _0x1372a9=SignalStrength[_0x52a91c(0xe6)];if(_0x5830d2>=0.85)_0x1372a9=SignalStrength['VERY_STRONG'];else{if(_0x5830d2>=0.75)_0x1372a9=SignalStrength['STRONG'];else{if(_0x5830d2<0.6)_0x1372a9=SignalStrength['WEAK'];}}const _0x305edf=0.5+(_0x5830d2-0.5)*0.4,_0xd8415b=_0x305edf*Math[_0x52a91c(0x131)](_0x2f2c2a-_0xd9305d)-(0x1-_0x305edf)*Math['abs'](_0xd9305d-_0x3af560);this[_0x52a91c(0xcb)]=Date['now'](),this[_0x52a91c(0xe5)][_0x52a91c(0x102)]++;const _0x4ce877={'id':uuidv4(),'timestamp':Date['now'](),'symbol':_0x299b56[_0x52a91c(0x109)]('.')[0x0]||_0x299b56,'contractId':_0x299b56,'side':_0x1c0923===_0x52a91c(0xf3)?OrderSide[_0x52a91c(0x11d)]:OrderSide['ASK'],'direction':_0x1c0923,'strategy':_0x52a91c(0x138),'strength':_0x1372a9,'edge':_0xd8415b,'confidence':_0x5830d2,'entry':_0xd9305d,'entryPrice':_0xd9305d,'stopLoss':_0x3af560,'takeProfit':_0x2f2c2a,'riskReward':_0x48f653,'stopTicks':_0x1c7235,'targetTicks':_0x13969a,'trailTriggerTicks':_0xed111b,'trailDistanceTicks':_0x7ff7c7,'beBreakeven':_0x1bea8a,'profitLockLevel':_0x2bd835,'zScore':_0x105389,'zScoreExit':this[_0x52a91c(0xe7)],'vpinValue':_0x2fdbf2,'kyleLambda':_0x1c07b7,'kalmanEstimate':_0x34c8eb,'volatilityRegime':_0x549d83,'ofiValue':_0x2c5fdc,'models':_0x51ee42,'orderFlowConfirmed':_0x5de0e9,'kalmanConfirmed':_0x129719,'expires':Date['now']()+0xea60};return this['emit']('signal',{'side':_0x1c0923==='long'?_0x52a91c(0x117):_0x52a91c(0xd5),'action':_0x52a91c(0xf6),'reason':'Z='+_0x105389['toFixed'](0x2)+',\x20VPIN='+(_0x2fdbf2*0x64)[_0x52a91c(0xf2)](0x0)+_0x52a91c(0x11a)+(_0x2c5fdc*0x64)[_0x52a91c(0xf2)](0x0)+'%,\x20cf='+(_0x5830d2*0x64)[_0x52a91c(0xf2)](0x0)+'%',..._0x4ce877}),this[_0x52a91c(0x10f)](_0x52a91c(0xd3),{'type':_0x52a91c(0x111),'message':'[HQX]\x20SIGNAL:\x20'+_0x1c0923['toUpperCase']()+'\x20@\x20'+_0xd9305d['toFixed'](0x2)+_0x52a91c(0xf9)+_0x105389[_0x52a91c(0xf2)](0x2)+_0x52a91c(0x12d)+(_0x2fdbf2*0x64)['toFixed'](0x0)+_0x52a91c(0x137)+(_0x2c5fdc*0x64)[_0x52a91c(0xf2)](0x0)+'%\x20Kyle:'+_0x1c07b7[_0x52a91c(0xf2)](0x5)+_0x52a91c(0x10b)+_0x549d83+_0x52a91c(0xcd)+(_0x5830d2*0x64)[_0x52a91c(0xf2)](0x0)+'%'}),_0x4ce877;}['shouldExitByZScore'](_0x1f770a){const _0x4a6d8b=_0x574846,_0x24e074=this[_0x4a6d8b(0x114)][_0x4a6d8b(0xe4)](_0x1f770a);if(!_0x24e074||_0x24e074['length']<0x32)return![];const _0x46e675=this['_computeZScore'](_0x24e074);return Math['abs'](_0x46e675)<this[_0x4a6d8b(0xe7)];}['getModelValues'](_0x562f5f){const _0x351298=_0x574846,_0x108d0f=this['priceBuffer']['get'](_0x562f5f),_0x1e1e36=this[_0x351298(0xf0)][_0x351298(0xe4)](_0x562f5f),_0x45b153=this[_0x351298(0x12a)][_0x351298(0xe4)](_0x562f5f);if(!_0x108d0f||!_0x1e1e36||!_0x45b153||_0x45b153['length']<0x32)return null;const _0x430141=this[_0x351298(0x135)](_0x108d0f),_0x4dd256=this['_computeVPIN'](_0x1e1e36),_0x324aef=this[_0x351298(0xd8)](_0x45b153),_0x334dfa=this[_0x351298(0x13b)](_0x45b153);return{'zscore':Math['min'](0x1,Math['abs'](_0x430141)/0x4),'vpin':0x1-_0x4dd256,'kyleLambda':_0x324aef>0.001?0.5:0.8,'kalman':0.7,'volatility':0.7,'ofi':Math[_0x351298(0x131)](_0x334dfa)>0.1?0.8:0.5,'composite':0.7,'raw':{'zscore':_0x430141,'vpin':_0x4dd256,'kyleLambda':_0x324aef,'ofi':_0x334dfa}};}[_0x574846(0x121)](_0x4dc27f,_0x23d5b5){const _0x105aad=_0x574846,_0x372e80=this[_0x105aad(0x12a)][_0x105aad(0xe4)](_0x4dc27f)||[];if(_0x372e80['length']<0x32)return{'ready':![],'message':'Collecting\x20data...\x20'+_0x372e80['length']+'/50\x20bars'};const _0x384ca7=this['priceBuffer']['get'](_0x4dc27f)||[],_0x46ee9b=this[_0x105aad(0xf0)][_0x105aad(0xe4)](_0x4dc27f)||[],_0x4a9173=this['_computeZScore'](_0x384ca7),_0x22f635=this[_0x105aad(0xef)](_0x46ee9b),_0x125b68=this[_0x105aad(0x13b)](_0x372e80),_0x4b4e82=this['_computeKyleLambda'](_0x372e80),{regime:_0xcfd5e8,params:_0xa458f9}=this[_0x105aad(0xf5)](_0x4dc27f,_0x372e80);return{'ready':!![],'zScore':_0x4a9173,'vpin':_0x22f635,'ofi':_0x125b68,'kyleLambda':_0x4b4e82,'regime':_0xcfd5e8,'stopTicks':Math[_0x105aad(0xe0)](this[_0x105aad(0xde)]*_0xa458f9[_0x105aad(0xfd)]),'targetTicks':Math[_0x105aad(0xe0)](this['baseTargetTicks']*_0xa458f9[_0x105aad(0x101)]),'threshold':_0xa458f9[_0x105aad(0x12f)],'barsProcessed':_0x372e80['length'],'models':_0x105aad(0xfa)};}[_0x574846(0xda)](_0x3f0c43){const _0x5db666=_0x574846;this['recentTrades']['push']({'netPnl':_0x3f0c43,'timestamp':Date[_0x5db666(0x130)]()});if(this['recentTrades']['length']>0x64)this['recentTrades'][_0x5db666(0x12b)]();_0x3f0c43>0x0?(this['winStreak']++,this[_0x5db666(0xf1)]=0x0,this[_0x5db666(0xe5)]['wins']++):(this[_0x5db666(0xf1)]++,this[_0x5db666(0x13f)]=0x0,this[_0x5db666(0xe5)][_0x5db666(0xcf)]++),this['stats'][_0x5db666(0xd7)]++,this['stats']['pnl']+=_0x3f0c43,this[_0x5db666(0x10f)](_0x5db666(0xd3),{'type':'debug','message':_0x5db666(0xe3)+(_0x3f0c43>0x0?_0x5db666(0xec):_0x5db666(0x13a))+'\x20$'+_0x3f0c43[_0x5db666(0xf2)](0x2)+_0x5db666(0xd2)+(_0x3f0c43>0x0?this[_0x5db666(0x13f)]:-this[_0x5db666(0xf1)])});}[_0x574846(0xea)](_0x52e267){const _0xee4464=_0x574846;return this[_0xee4464(0x12a)]['get'](_0x52e267)||[];}['getStats'](){return this['stats'];}[_0x574846(0xce)](_0x91926d){const _0x97aca9=_0x574846;this[_0x97aca9(0x12a)]['set'](_0x91926d,[]),this['priceBuffer']['set'](_0x91926d,[]),this['volumeBuffer']['set'](_0x91926d,[]),this[_0x97aca9(0x133)][_0x97aca9(0xe8)](_0x91926d,[]),this['kalmanStates']['set'](_0x91926d,{'estimate':0x0,'errorCovariance':0x1}),this['emit'](_0x97aca9(0xd3),{'type':_0x97aca9(0x111),'message':'[HQX-UltraScalping]\x20Reset\x20state\x20for\x20'+_0x91926d});}}class UltraScalpingStrategy extends EventEmitter{constructor(_0x33993c={}){const _0x1bc047=_0x574846;super(),this['config']=_0x33993c,this[_0x1bc047(0x10a)]=new HQXUltraScalping(_0x33993c),this[_0x1bc047(0x10a)]['on'](_0x1bc047(0x132),_0x38f44a=>this['emit'](_0x1bc047(0x132),_0x38f44a)),this['strategy']['on']('log',_0x75d2f9=>this['emit'](_0x1bc047(0xd3),_0x75d2f9));}[_0x574846(0x106)](_0x210e0d){const _0x1f99fb=_0x574846;return this[_0x1f99fb(0x10a)][_0x1f99fb(0x106)](_0x210e0d);}[_0x574846(0x112)](_0x2c221c){const _0x44f924=_0x574846;return this[_0x44f924(0x10a)]['onTick'](_0x2c221c);}['onTrade'](_0x171366){const _0x50d37=_0x574846;return this[_0x50d37(0x10a)]['onTrade'](_0x171366);}[_0x574846(0x124)](_0x59d8ae,_0x1dd058){const _0x29a4e5=_0x574846;return this[_0x29a4e5(0x10a)][_0x29a4e5(0x124)](_0x59d8ae,_0x1dd058);}['initialize'](_0x454d68,_0x55632e,_0x2e4405){const _0x3d7eba=_0x574846;return this[_0x3d7eba(0x10a)]['initialize'](_0x454d68,_0x55632e,_0x2e4405);}[_0x574846(0x121)](_0x45de2b,_0x21de7d){const _0x18aedc=_0x574846;return this[_0x18aedc(0x10a)]['getAnalysisState'](_0x45de2b,_0x21de7d);}['recordTradeResult'](_0x90840c){const _0x3c242d=_0x574846;return this['strategy'][_0x3c242d(0xda)](_0x90840c);}[_0x574846(0xce)](_0x41c6e9){const _0x21fd64=_0x574846;return this['strategy'][_0x21fd64(0xce)](_0x41c6e9);}[_0x574846(0xdf)](){const _0x5d9963=_0x574846;return this['strategy'][_0x5d9963(0xdf)]();}['getBarHistory'](_0x3e2449){return this['strategy']['getBarHistory'](_0x3e2449);}['getModelValues'](_0x26bbcb){const _0x3d72f3=_0x574846;return this['strategy'][_0x3d72f3(0x122)](_0x26bbcb);}['shouldExitByZScore'](_0x2b0ec6){return this['strategy']['shouldExitByZScore'](_0x2b0ec6);}[_0x574846(0xcc)](_0x1782df){return null;}}module[_0x574846(0xd1)]={'HQXUltraScalping':HQXUltraScalping,'UltraScalpingStrategy':UltraScalpingStrategy,'M1':UltraScalpingStrategy,'S1':HQXUltraScalping,'OrderSide':OrderSide,'SignalStrength':SignalStrength};function _0x2aaf(_0x145c06,_0x43c8b0){_0x145c06=_0x145c06-0xca;const _0xe7f5da=_0xe7f5();let _0x2aaf13=_0xe7f5da[_0x145c06];return _0x2aaf13;}function _0xe7f5(){const _0x350c35=['shift','ofiLookback','\x20VPIN:','length','zscoreThreshold','now','abs','signal','atrHistory','side','_computeZScore','ofi','%\x20OFI:','HQX_ULTRA_SCALPING_6MODELS','vpinWindow','LOSS','_computeOrderFlowImbalance','high','push','short','winStreak','onTrade','lastSignalTime','generateSignal','\x20|\x20Conf:','reset','losses','composite','exports',',\x20streak:\x20','log','kalmanMeasurementNoise','sell','cooldownMs','trades','_computeKyleLambda','min','recordTradeResult','errorCovariance','1030169BjOfeB','_calculateATR','baseStopTicks','getStats','round','2197460uMgEWH','symbol','[HQX]\x20Trade\x20result:\x20','get','stats','MODERATE','zscoreExitThreshold','set','baseTargetTicks','getBarHistory','_applyKalmanFilter','WIN','637731lQKqyl','kalman','_computeVPIN','volumeBuffer','lossStreak','toFixed','long','volume','_detectVolatilityRegime','open','12697270KQNldJ','minConfidence','\x20|\x20Z:','6\x20(Z-Score,\x20VPIN,\x20Kyle,\x20Kalman,\x20Vol,\x20OFI)','initialize','kalmanStates','stopMultiplier','tickValue','730095GCtyhG','reduce','targetMultiplier','signals','slice','recentTrades','profitLockPct','processTick','tickSize','[HQX-UltraScalping]\x206\x20Models:\x20Z-Score(30%),\x20OFI(20%),\x20VPIN(15%),\x20Kalman(15%),\x20Kyle(10%),\x20Vol(10%)','split','strategy','\x20Regime:','minHoldTimeMs','88ienqFH','volatilityLookback','emit','200874NBxZbZ','info','onTick','vpinToxicThreshold','priceBuffer','zscore','low','buy','estimate','weights','%,\x20OFI=','vpin','volatility','BID','confidenceBonus','uuid','max','getAnalysisState','getModelValues','_generateSignal','processBar','15urphFL','close','breakevenTicks','512450DLPVLl','6xemBKc','barHistory'];_0xe7f5=function(){return _0x350c35;};return _0xe7f5();}