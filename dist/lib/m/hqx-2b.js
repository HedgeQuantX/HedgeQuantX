const _0x3c2c79=_0x3286;(function(_0x29ac90,_0x4d799b){const _0x37e0b4=_0x3286,_0x2b55b4=_0x29ac90();while(!![]){try{const _0xc35e54=-parseInt(_0x37e0b4(0x170))/0x1+parseInt(_0x37e0b4(0x137))/0x2*(-parseInt(_0x37e0b4(0x12a))/0x3)+parseInt(_0x37e0b4(0x1a6))/0x4+-parseInt(_0x37e0b4(0x166))/0x5*(-parseInt(_0x37e0b4(0x16b))/0x6)+-parseInt(_0x37e0b4(0x14f))/0x7*(-parseInt(_0x37e0b4(0x163))/0x8)+-parseInt(_0x37e0b4(0x1a7))/0x9+parseInt(_0x37e0b4(0x1a5))/0xa*(-parseInt(_0x37e0b4(0x174))/0xb);if(_0xc35e54===_0x4d799b)break;else _0x2b55b4['push'](_0x2b55b4['shift']());}catch(_0x5e77b5){_0x2b55b4['push'](_0x2b55b4['shift']());}}}(_0x2306,0x6eb2b));const EventEmitter=require(_0x3c2c79(0x14b)),{v4:uuidv4}=require(_0x3c2c79(0x11d)),OrderSide={'BID':0x0,'ASK':0x1},SignalStrength={'WEAK':0x1,'MODERATE':0x2,'STRONG':0x3,'VERY_STRONG':0x4},SweepType={'HIGH_SWEEP':_0x3c2c79(0x176),'LOW_SWEEP':'low'},ZoneType={'RESISTANCE':_0x3c2c79(0x118),'SUPPORT':'support'},DEFAULT_CONFIG={'tickSize':0.25,'tickValue':0x5,'swing':{'lookbackBars':0x3,'minStrength':0x2,'confirmationBars':0x1},'zone':{'clusterToleranceTicks':0x4,'minTouches':0x2,'maxZoneAgeBars':0xc8,'maxZoneDistanceTicks':0x28,'cooldownBars':0xa},'sweep':{'minPenetrationTicks':0.5,'maxPenetrationTicks':0x8,'maxDurationBars':0x5,'minQualityScore':0.25,'minVolumeRatio':0.5,'minBodyRatio':0.1},'execution':{'stopTicks':0xa,'targetTicks':0x28,'breakevenTicks':0x4,'trailTriggerTicks':0x8,'trailDistanceTicks':0x4,'cooldownMs':0x3a98,'minHoldTimeMs':0x2710,'slippageTicks':0x1,'commissionPerSide':0x2},'session':{'enabled':![],'startHour':0x9,'startMinute':0x1e,'endHour':0x10,'endMinute':0x0,'timezone':'America/New_York'}};class SwingPoint{constructor(_0x4c7556,_0x2b0437,_0x4a33de,_0x5510cd,_0x3ea663=0x1){const _0x531e4e=_0x3c2c79;this['type']=_0x4c7556,this[_0x531e4e(0x13e)]=_0x2b0437,this['barIndex']=_0x4a33de,this['timestamp']=_0x5510cd,this['strength']=_0x3ea663;}}function _0x2306(){const _0x1d6ecf=['tickSize','getStats','stopTicks','swingPoints','getAnalysisState','session','min','s\x20<\x20','_detectSwings','timestamp','sweepType','getBarHistory','info','delete','processTick','strategy','getHealthStatus','penetrationTicks','map','execution','minVolumeRatio','sort','low','toFixed','stats','volumeRatio','barIndex','SUPPORT','length','x\x20|\x20Q:','now','cooldownBars','[HQX-2B]\x20Preload\x20complete:\x20','reset','\x20|\x20Total:\x20','clusterToleranceTicks','set','[2B]\x20SWEEP\x20','isValid','emit','breakevenTicks','priceHigh','20LUhKRy','2891544dWvjDd','516339jAtdHk','long','wins','qualityScore','size','close','log','has','split','targetTicks','maxPenetrationTicks','barHistory','resistance','WIN','_detectSweep','priceLow','filter','uuid','floor','HIGH_SWEEP','push','signal','_getVolumeRatio','open','/5\x20bars','isWithinSession','max','\x20|\x20','config','[2B]\x20Calling\x20_generateSignal\x20for\x20','2026110EvaPsr','maxZoneAgeBars','splice','maxDurationBars','RESISTANCE','startTime','\x20|\x20Pen:','exitBarIndex','preloadBars','processBar','tickCount','shift','containsPrice','2CMiweW','\x20historical\x20signals\x20detected\x20(ignored)','getLevel','trailTriggerTicks','liquidityZones','durationBars','BID','price','currentBar','extremeBarIndex','\x20historical\x20bars...','isDST','onTrade','onTick','type','WEAK','t,\x20BE=','swing','minQualityScore','generateSignal','events','_generateSignal','get','find','21RsODKP','lastSignalTime','buy','distance','barIntervalMs','STRONG','touches','HQX-2B\x20Liquidity\x20Sweep\x20(Optimized)','_mergeConfig','activeSweeps','cooldownMs','toUpperCase','recentTrades','HQX_2B_LIQUIDITY_SWEEP','exports','createdAt','tickValue','sweptAt','trailDistanceTicks','LOSS','2374576aztBTa','_updateZones','volume','550asBGBf','abs','MODERATE','short',',\x20value=','46668ElOrNT','Collecting\x20data...\x20','minPenetrationTicks','initialize','zone','542336KtDGBb','swept','\x20@\x20','recordTradeResult','4072398pKWXOf','lastUsedBarIndex','high','debug','[2B]\x20_generateSignal\x20returned\x20null\x20(likely\x20cooldown)','getFullYear','[2B]\x20NEW\x20ZONE\x20'];_0x2306=function(){return _0x1d6ecf;};return _0x2306();}class LiquidityZone{constructor(_0x47dd02,_0x91f01b,_0x2fc927,_0x60a931,_0x970786){const _0x5b63e4=_0x3c2c79;this['id']=uuidv4(),this['type']=_0x47dd02,this['priceHigh']=_0x91f01b,this['priceLow']=_0x2fc927,this[_0x5b63e4(0x15e)]=_0x60a931,this[_0x5b63e4(0x195)]=_0x970786,this['touches']=0x1,this['swept']=![],this['sweptAt']=null,this['lastUsedBarIndex']=-0x3e7,this['qualityScore']=0.5;}[_0x3c2c79(0x136)](_0x1021bb,_0x259fdd,_0x4d601d){const _0x3c5670=_0x3c2c79,_0x56b511=_0x259fdd*_0x4d601d;return _0x1021bb>=this[_0x3c5670(0x11b)]-_0x56b511&&_0x1021bb<=this[_0x3c5670(0x1a4)]+_0x56b511;}[_0x3c2c79(0x139)](){const _0x505bc5=_0x3c2c79;return(this[_0x505bc5(0x1a4)]+this[_0x505bc5(0x11b)])/0x2;}}class SweepEvent{constructor(_0x1dd70a,_0x3f2142,_0x5da72a,_0x5d7747,_0x388d23){const _0x378def=_0x3c2c79;this[_0x378def(0x185)]=_0x1dd70a,this['zone']=_0x3f2142,this['entryBarIndex']=_0x5da72a,this[_0x378def(0x140)]=_0x5d7747,this['extremePrice']=_0x388d23,this[_0x378def(0x131)]=null,this[_0x378def(0x1a1)]=![],this['qualityScore']=0x0,this[_0x378def(0x18c)]=0x0,this[_0x378def(0x13c)]=0x0,this[_0x378def(0x194)]=0x1;}}class HQX2BLiquiditySweep extends EventEmitter{constructor(_0x73ec9d={}){const _0x10b74a=_0x3c2c79;super(),this['config']=this[_0x10b74a(0x157)](DEFAULT_CONFIG,_0x73ec9d),this[_0x10b74a(0x17b)]=this[_0x10b74a(0x128)]['tickSize'],this['tickValue']=this['config'][_0x10b74a(0x15f)],this['barHistory']=new Map(),this['swingPoints']=new Map(),this['liquidityZones']=new Map(),this['activeSweeps']=new Map(),this[_0x10b74a(0x13f)]=new Map(),this[_0x10b74a(0x153)]=0xea60,this[_0x10b74a(0x150)]=0x0,this['startTime']=Date['now'](),this[_0x10b74a(0x193)]={'signals':0x0,'trades':0x0,'wins':0x0,'losses':0x0,'pnl':0x0},this[_0x10b74a(0x15b)]=[];}[_0x3c2c79(0x157)](_0x2ed7e0,_0x35aaed){const _0xffafaf={..._0x2ed7e0};for(const _0x39396d in _0x35aaed){typeof _0x35aaed[_0x39396d]==='object'&&!Array['isArray'](_0x35aaed[_0x39396d])?_0xffafaf[_0x39396d]={..._0x2ed7e0[_0x39396d],..._0x35aaed[_0x39396d]}:_0xffafaf[_0x39396d]=_0x35aaed[_0x39396d];}return _0xffafaf;}['isWithinSession'](_0x51bb43){const _0x47c243=_0x3c2c79;if(!this[_0x47c243(0x128)][_0x47c243(0x180)]['enabled'])return!![];const _0x3aaefc=new Date(_0x51bb43),_0x1bfb98=this[_0x47c243(0x142)](_0x3aaefc)?-0x4:-0x5,_0x3bc5c9=_0x3aaefc['getUTCHours'](),_0x426554=_0x3aaefc['getUTCMinutes'](),_0xd6e43d=(_0x3bc5c9+_0x1bfb98+0x18)%0x18,{startHour:_0x5ec534,startMinute:_0xcdb89c,endHour:_0x5f856b,endMinute:_0x3f11a3}=this[_0x47c243(0x128)][_0x47c243(0x180)],_0x426f54=_0xd6e43d*0x3c+_0x426554,_0x1895fd=_0x5ec534*0x3c+_0xcdb89c,_0x5d165b=_0x5f856b*0x3c+_0x3f11a3;return _0x426f54>=_0x1895fd&&_0x426f54<_0x5d165b;}['isDST'](_0x1f9d17){const _0x273de5=_0x3c2c79,_0xb94322=new Date(_0x1f9d17[_0x273de5(0x179)](),0x0,0x1),_0x227bf7=new Date(_0x1f9d17[_0x273de5(0x179)](),0x6,0x1),_0x5dc005=Math[_0x273de5(0x126)](_0xb94322['getTimezoneOffset'](),_0x227bf7['getTimezoneOffset']());return _0x1f9d17['getTimezoneOffset']()<_0x5dc005;}['initialize'](_0x188519,_0x4ddbbf=0.25,_0x5d88e0=0x5){const _0x43c69f=_0x3c2c79;this[_0x43c69f(0x17b)]=_0x4ddbbf,this['tickValue']=_0x5d88e0,this[_0x43c69f(0x128)]['tickSize']=_0x4ddbbf,this[_0x43c69f(0x128)][_0x43c69f(0x15f)]=_0x5d88e0,this[_0x43c69f(0x117)][_0x43c69f(0x19f)](_0x188519,[]),this['swingPoints']['set'](_0x188519,[]),this[_0x43c69f(0x13b)]['set'](_0x188519,[]),this['activeSweeps']['set'](_0x188519,[]),this['currentBar'][_0x43c69f(0x188)](_0x188519),this[_0x43c69f(0x1a2)]('log',{'type':_0x43c69f(0x187),'message':'[HQX-2B]\x20Initialized\x20for\x20'+_0x188519+':\x20tick='+_0x4ddbbf+_0x43c69f(0x16a)+_0x5d88e0+',\x20TF=1min'}),this['emit'](_0x43c69f(0x1ad),{'type':_0x43c69f(0x187),'message':'[HQX-2B]\x20Params:\x20Stop='+this[_0x43c69f(0x128)]['execution']['stopTicks']+'t,\x20Target='+this[_0x43c69f(0x128)]['execution'][_0x43c69f(0x115)]+_0x43c69f(0x147)+this['config']['execution']['breakevenTicks']+'t,\x20Trail='+this[_0x43c69f(0x128)][_0x43c69f(0x18e)]['trailTriggerTicks']+'/'+this['config']['execution'][_0x43c69f(0x161)]});}[_0x3c2c79(0x189)](_0x2afd93){const _0x1b6503=_0x3c2c79,{contractId:_0x3f6535,price:_0x1b0c2c,volume:_0x21311b,timestamp:_0x539db5}=_0x2afd93,_0x222ac5=_0x539db5||Date[_0x1b6503(0x199)](),_0x15d4ff=_0x21311b||0x1;if(!this[_0x1b6503(0x125)](_0x222ac5))return null;let _0x143ce8=this[_0x1b6503(0x13f)][_0x1b6503(0x14d)](_0x3f6535);const _0x57cd92=Math[_0x1b6503(0x11e)](_0x222ac5/this[_0x1b6503(0x153)])*this[_0x1b6503(0x153)];if(!_0x143ce8||_0x143ce8[_0x1b6503(0x12f)]!==_0x57cd92){if(_0x143ce8){const _0x914633={'timestamp':_0x143ce8['startTime'],'open':_0x143ce8['open'],'high':_0x143ce8['high'],'low':_0x143ce8['low'],'close':_0x143ce8[_0x1b6503(0x1ac)],'volume':_0x143ce8['volume']},_0x1a4ebb=this[_0x1b6503(0x133)](_0x3f6535,_0x914633);return this['currentBar']['set'](_0x3f6535,{'startTime':_0x57cd92,'open':_0x1b0c2c,'high':_0x1b0c2c,'low':_0x1b0c2c,'close':_0x1b0c2c,'volume':_0x15d4ff}),_0x1a4ebb;}else return this[_0x1b6503(0x13f)][_0x1b6503(0x19f)](_0x3f6535,{'startTime':_0x57cd92,'open':_0x1b0c2c,'high':_0x1b0c2c,'low':_0x1b0c2c,'close':_0x1b0c2c,'volume':_0x15d4ff}),null;}else return _0x143ce8[_0x1b6503(0x176)]=Math[_0x1b6503(0x126)](_0x143ce8[_0x1b6503(0x176)],_0x1b0c2c),_0x143ce8[_0x1b6503(0x191)]=Math[_0x1b6503(0x181)](_0x143ce8[_0x1b6503(0x191)],_0x1b0c2c),_0x143ce8[_0x1b6503(0x1ac)]=_0x1b0c2c,_0x143ce8[_0x1b6503(0x165)]+=_0x15d4ff,null;}['onTick'](_0x1c4e6b){const _0xee5035=_0x3c2c79;return this[_0xee5035(0x189)](_0x1c4e6b);}['onTrade'](_0x3cacf6){const _0x49c4c0=_0x3c2c79;return this['processTick']({'contractId':_0x3cacf6['contractId']||_0x3cacf6['symbol'],'price':_0x3cacf6[_0x49c4c0(0x13e)],'volume':_0x3cacf6[_0x49c4c0(0x1ab)]||_0x3cacf6[_0x49c4c0(0x165)]||0x1,'timestamp':_0x3cacf6[_0x49c4c0(0x184)]||Date[_0x49c4c0(0x199)]()});}[_0x3c2c79(0x133)](_0x35e484,_0x28439a){const _0x128f24=_0x3c2c79;let _0x3f7c59=this[_0x128f24(0x117)]['get'](_0x35e484);!_0x3f7c59&&(this[_0x128f24(0x16e)](_0x35e484),_0x3f7c59=this[_0x128f24(0x117)][_0x128f24(0x14d)](_0x35e484));_0x3f7c59['push'](_0x28439a);if(_0x3f7c59[_0x128f24(0x197)]>0x1f4)_0x3f7c59['shift']();const _0x328a5c=_0x3f7c59[_0x128f24(0x197)]-0x1;if(_0x3f7c59['length']<this['config'][_0x128f24(0x148)]['lookbackBars']*0x3)return null;const _0x5b9c9b=this[_0x128f24(0x17e)]['get'](_0x35e484)['length'];this['_detectSwings'](_0x35e484,_0x3f7c59,_0x328a5c);const _0x517b49=this['swingPoints'][_0x128f24(0x14d)](_0x35e484);if(_0x517b49[_0x128f24(0x197)]>_0x5b9c9b){const _0x3cbed6=_0x517b49[_0x517b49['length']-0x1];this['emit'](_0x128f24(0x1ad),{'type':_0x128f24(0x177),'message':'[2B]\x20NEW\x20SWING\x20'+_0x3cbed6['type'][_0x128f24(0x15a)]()+'\x20@\x20'+_0x3cbed6[_0x128f24(0x13e)]['toFixed'](0x2)+_0x128f24(0x19d)+_0x517b49['length']});}const _0x1f5273=this[_0x128f24(0x11a)](_0x35e484,_0x3f7c59,_0x328a5c);_0x1f5273&&this['emit'](_0x128f24(0x1ad),{'type':_0x128f24(0x177),'message':_0x128f24(0x1a0)+_0x1f5273['sweepType']+'\x20|\x20Valid:\x20'+_0x1f5273[_0x128f24(0x1a1)]+'\x20|\x20Pen:\x20'+_0x1f5273['penetrationTicks'][_0x128f24(0x192)](0x1)+'t\x20|\x20Q:\x20'+(_0x1f5273[_0x128f24(0x1aa)]*0x64)[_0x128f24(0x192)](0x0)+'%'});const _0x547e4f=this['liquidityZones']['get'](_0x35e484)[_0x128f24(0x197)];this[_0x128f24(0x164)](_0x35e484,_0x328a5c);const _0x6a3c62=this['liquidityZones'][_0x128f24(0x14d)](_0x35e484);if(_0x6a3c62[_0x128f24(0x197)]>_0x547e4f){const _0x173ed7=_0x6a3c62[_0x6a3c62[_0x128f24(0x197)]-0x1];this['emit']('log',{'type':'debug','message':_0x128f24(0x17a)+_0x173ed7['type'][_0x128f24(0x15a)]()+_0x128f24(0x172)+_0x173ed7[_0x128f24(0x139)]()['toFixed'](0x2)+'\x20|\x20Total:\x20'+_0x6a3c62['length']});}if(_0x1f5273&&_0x1f5273[_0x128f24(0x1a1)]){this[_0x128f24(0x1a2)]('log',{'type':_0x128f24(0x177),'message':_0x128f24(0x129)+_0x1f5273[_0x128f24(0x185)]+'\x20sweep...'});const _0x170907=this[_0x128f24(0x14c)](_0x35e484,_0x28439a,_0x328a5c,_0x1f5273);return!_0x170907&&this['emit'](_0x128f24(0x1ad),{'type':'debug','message':_0x128f24(0x178)}),_0x170907;}return null;}[_0x3c2c79(0x183)](_0x53b086,_0xd2b83e,_0x2e4c6e){const _0x3d9adb=_0x3c2c79,_0x1d03d9=this[_0x3d9adb(0x128)][_0x3d9adb(0x148)]['lookbackBars'],_0x5aade9=this['config'][_0x3d9adb(0x148)]['minStrength'];if(_0x2e4c6e<_0x1d03d9*0x2)return;const _0x401dcd=this['swingPoints']['get'](_0x53b086),_0x2eb524=_0x2e4c6e-_0x1d03d9,_0x3876de=_0xd2b83e[_0x2eb524];let _0x8112a=!![],_0x33497c=0x0;for(let _0x2b97ec=_0x2eb524-_0x1d03d9;_0x2b97ec<=_0x2eb524+_0x1d03d9;_0x2b97ec++){if(_0x2b97ec===_0x2eb524||_0x2b97ec<0x0||_0x2b97ec>=_0xd2b83e['length'])continue;if(_0xd2b83e[_0x2b97ec][_0x3d9adb(0x176)]>=_0x3876de[_0x3d9adb(0x176)]){_0x8112a=![];break;}_0x33497c++;}if(_0x8112a&&_0x33497c>=_0x5aade9){const _0x896569=_0x401dcd[_0x3d9adb(0x14e)](_0x246a61=>_0x246a61[_0x3d9adb(0x195)]===_0x2eb524&&_0x246a61[_0x3d9adb(0x145)]===_0x3d9adb(0x176));!_0x896569&&_0x401dcd['push'](new SwingPoint(_0x3d9adb(0x176),_0x3876de[_0x3d9adb(0x176)],_0x2eb524,_0x3876de[_0x3d9adb(0x184)],_0x33497c));}let _0x1478c8=!![],_0x24cb3d=0x0;for(let _0x1cd509=_0x2eb524-_0x1d03d9;_0x1cd509<=_0x2eb524+_0x1d03d9;_0x1cd509++){if(_0x1cd509===_0x2eb524||_0x1cd509<0x0||_0x1cd509>=_0xd2b83e[_0x3d9adb(0x197)])continue;if(_0xd2b83e[_0x1cd509]['low']<=_0x3876de['low']){_0x1478c8=![];break;}_0x24cb3d++;}if(_0x1478c8&&_0x24cb3d>=_0x5aade9){const _0x5b749b=_0x401dcd[_0x3d9adb(0x14e)](_0x5685f3=>_0x5685f3[_0x3d9adb(0x195)]===_0x2eb524&&_0x5685f3['type']==='low');!_0x5b749b&&_0x401dcd[_0x3d9adb(0x120)](new SwingPoint(_0x3d9adb(0x191),_0x3876de['low'],_0x2eb524,_0x3876de[_0x3d9adb(0x184)],_0x24cb3d));}const _0x1eb0b7=this[_0x3d9adb(0x128)]['zone'][_0x3d9adb(0x12b)];while(_0x401dcd[_0x3d9adb(0x197)]>0x0&&_0x401dcd[0x0][_0x3d9adb(0x195)]<_0x2e4c6e-_0x1eb0b7){_0x401dcd[_0x3d9adb(0x135)]();}}[_0x3c2c79(0x164)](_0x2a7d5e,_0x4d04f6){const _0x35951b=_0x3c2c79,_0x465fe9=this[_0x35951b(0x17e)]['get'](_0x2a7d5e),_0x43d9b2=this['liquidityZones'][_0x35951b(0x14d)](_0x2a7d5e),_0x16aa39=this['config']['zone'][_0x35951b(0x19e)]*this[_0x35951b(0x17b)],_0x387e8b=this[_0x35951b(0x128)][_0x35951b(0x16f)][_0x35951b(0x12b)];for(let _0x1af409=_0x43d9b2['length']-0x1;_0x1af409>=0x0;_0x1af409--){_0x4d04f6-_0x43d9b2[_0x1af409][_0x35951b(0x195)]>_0x387e8b&&_0x43d9b2[_0x35951b(0x12c)](_0x1af409,0x1);}for(const _0x2a73ac of _0x465fe9){let _0x2a8b30=null;for(const _0x5500dc of _0x43d9b2){if(_0x5500dc['containsPrice'](_0x2a73ac[_0x35951b(0x13e)],this['config'][_0x35951b(0x16f)][_0x35951b(0x19e)],this[_0x35951b(0x17b)])){_0x2a8b30=_0x5500dc;break;}}if(_0x2a8b30){_0x2a8b30['touches']++;if(_0x2a73ac[_0x35951b(0x13e)]>_0x2a8b30['priceHigh'])_0x2a8b30['priceHigh']=_0x2a73ac['price'];if(_0x2a73ac['price']<_0x2a8b30['priceLow'])_0x2a8b30[_0x35951b(0x11b)]=_0x2a73ac[_0x35951b(0x13e)];_0x2a8b30['qualityScore']=Math['min'](0x1,0.3+_0x2a8b30['touches']*0.15);}else{const _0x299f07=_0x2a73ac['type']===_0x35951b(0x176)?ZoneType['RESISTANCE']:ZoneType['SUPPORT'],_0x343645=new LiquidityZone(_0x299f07,_0x2a73ac[_0x35951b(0x13e)]+_0x16aa39/0x2,_0x2a73ac[_0x35951b(0x13e)]-_0x16aa39/0x2,_0x2a73ac['timestamp'],_0x2a73ac[_0x35951b(0x195)]);_0x343645[_0x35951b(0x1aa)]=0.3+_0x2a73ac['strength']*0.1,_0x43d9b2[_0x35951b(0x120)](_0x343645);}}}['_detectSweep'](_0x25ee86,_0x146c82,_0x5af283){const _0x10aa22=_0x3c2c79,_0x1efb0b=this[_0x10aa22(0x13b)]['get'](_0x25ee86),_0x439ded=_0x146c82[_0x5af283],_0x2753b3=_0x439ded[_0x10aa22(0x1ac)],_0x1a7494=this['config']['sweep'],_0x3b34dc=this['config'][_0x10aa22(0x16f)];for(const _0x2c9257 of _0x1efb0b){if(_0x2c9257['lastUsedBarIndex']>=0x0&&_0x5af283-_0x2c9257[_0x10aa22(0x175)]<_0x3b34dc[_0x10aa22(0x19a)])continue;const _0x448ff6=_0x2c9257[_0x10aa22(0x139)](),_0x505f83=Math['abs'](_0x2753b3-_0x448ff6)/this[_0x10aa22(0x17b)];if(_0x505f83>_0x3b34dc['maxZoneDistanceTicks'])continue;const _0x130a81=Math[_0x10aa22(0x126)](0x0,_0x5af283-_0x1a7494[_0x10aa22(0x12d)]*0x2);for(let _0x1fe75e=_0x130a81;_0x1fe75e<_0x5af283;_0x1fe75e++){const _0x21823b=_0x146c82[_0x1fe75e];if(_0x2c9257['type']===ZoneType[_0x10aa22(0x12e)]){const _0x13df06=(_0x21823b['high']-_0x2c9257['priceHigh'])/this['tickSize'];if(_0x13df06>=_0x1a7494[_0x10aa22(0x16d)]&&_0x13df06<=_0x1a7494[_0x10aa22(0x116)]){const _0x307fae=Math[_0x10aa22(0x181)](_0x2c9257['priceHigh'],_0x2c9257[_0x10aa22(0x1a4)]+_0x13df06*this['tickSize']);if(_0x2753b3<_0x307fae+this[_0x10aa22(0x17b)]*0x2){const _0x128da3=_0x21823b[_0x10aa22(0x176)]-_0x21823b['low'],_0x14d4bf=Math['abs'](_0x21823b['close']-_0x21823b['open']),_0x5eefa3=_0x128da3>0x0?_0x14d4bf/_0x128da3:0x0;if(_0x5eefa3>=_0x1a7494['minBodyRatio']){const _0x4d188b=this[_0x10aa22(0x122)](_0x146c82,_0x1fe75e,0x14);if(_0x4d188b>=_0x1a7494[_0x10aa22(0x18f)]){const _0x759152=new SweepEvent(SweepType[_0x10aa22(0x11f)],_0x2c9257,_0x1fe75e,_0x1fe75e,_0x21823b[_0x10aa22(0x176)]);_0x759152[_0x10aa22(0x131)]=_0x5af283,_0x759152['penetrationTicks']=_0x13df06,_0x759152[_0x10aa22(0x13c)]=_0x5af283-_0x1fe75e,_0x759152['volumeRatio']=_0x4d188b,_0x759152['qualityScore']=this['_scoreSweep'](_0x759152,_0x5eefa3),_0x759152['isValid']=_0x759152[_0x10aa22(0x1aa)]>=_0x1a7494[_0x10aa22(0x149)];if(_0x759152['isValid'])return _0x759152;}}}}}if(_0x2c9257['type']===ZoneType[_0x10aa22(0x196)]){const _0x45ac67=(_0x2c9257['priceLow']-_0x21823b['low'])/this[_0x10aa22(0x17b)];if(_0x45ac67>=_0x1a7494[_0x10aa22(0x16d)]&&_0x45ac67<=_0x1a7494[_0x10aa22(0x116)]){const _0x19ee56=Math['max'](_0x2c9257[_0x10aa22(0x11b)],_0x2c9257['priceLow']-_0x45ac67*this[_0x10aa22(0x17b)]);if(_0x2753b3>_0x19ee56-this[_0x10aa22(0x17b)]*0x2){const _0x281d8b=_0x21823b['high']-_0x21823b['low'],_0xc92c37=Math[_0x10aa22(0x167)](_0x21823b['close']-_0x21823b[_0x10aa22(0x123)]),_0xbc603c=_0x281d8b>0x0?_0xc92c37/_0x281d8b:0x0;if(_0xbc603c>=_0x1a7494['minBodyRatio']){const _0x367213=this['_getVolumeRatio'](_0x146c82,_0x1fe75e,0x14);if(_0x367213>=_0x1a7494['minVolumeRatio']){const _0x3a2885=new SweepEvent(SweepType['LOW_SWEEP'],_0x2c9257,_0x1fe75e,_0x1fe75e,_0x21823b[_0x10aa22(0x191)]);_0x3a2885['exitBarIndex']=_0x5af283,_0x3a2885['penetrationTicks']=_0x45ac67,_0x3a2885['durationBars']=_0x5af283-_0x1fe75e,_0x3a2885['volumeRatio']=_0x367213,_0x3a2885['qualityScore']=this['_scoreSweep'](_0x3a2885,_0xbc603c),_0x3a2885['isValid']=_0x3a2885[_0x10aa22(0x1aa)]>=_0x1a7494[_0x10aa22(0x149)];if(_0x3a2885['isValid'])return _0x3a2885;}}}}}}}return null;}[_0x3c2c79(0x122)](_0x6fb17f,_0x1ceb64,_0x4fb291){const _0x3707b1=_0x3c2c79,_0x264191=Math[_0x3707b1(0x126)](0x0,_0x1ceb64-_0x4fb291),_0x202d8f=_0x6fb17f['slice'](_0x264191,_0x1ceb64);if(_0x202d8f['length']===0x0)return 0x1;const _0x33ba18=_0x202d8f['map'](_0x35f097=>_0x35f097[_0x3707b1(0x165)])['sort']((_0x5e80e2,_0x4ba738)=>_0x5e80e2-_0x4ba738),_0x522d9a=Math[_0x3707b1(0x11e)](_0x33ba18[_0x3707b1(0x197)]/0x2),_0x214fb5=_0x33ba18[_0x522d9a]||0x1;return _0x6fb17f[_0x1ceb64]['volume']/_0x214fb5;}['_scoreSweep'](_0x4669c0,_0x439bcc){const _0x57063=_0x3c2c79;let _0x18b656=0x0;const _0x426427=0x4,_0x12f3fa=Math[_0x57063(0x167)](_0x4669c0['penetrationTicks']-_0x426427);return _0x18b656+=Math['max'](0x0,0.3-_0x12f3fa*0.03),_0x18b656+=Math[_0x57063(0x126)](0x0,0.25-_0x4669c0[_0x57063(0x13c)]*0.05),_0x18b656+=Math['min'](0.25,_0x4669c0['volumeRatio']*0.1),_0x18b656+=Math['min'](0.2,_0x439bcc*0.4),Math[_0x57063(0x181)](0x1,_0x18b656);}['_generateSignal'](_0x46a390,_0x8b7857,_0x5e7564,_0x10cf4b){const _0x12e294=_0x3c2c79,_0xb0e6cf=Date[_0x12e294(0x199)]()-this['lastSignalTime'];if(_0xb0e6cf<this[_0x12e294(0x128)]['execution'][_0x12e294(0x159)])return this['emit'](_0x12e294(0x1ad),{'type':'debug','message':'[2B]\x20Signal\x20blocked\x20by\x20cooldown\x20('+(_0xb0e6cf/0x3e8)['toFixed'](0x1)+_0x12e294(0x182)+this['config'][_0x12e294(0x18e)][_0x12e294(0x159)]/0x3e8+'s)'}),null;const _0x3a38ce=this[_0x12e294(0x128)]['execution'],_0x1487ea=_0x8b7857['close'],_0x3d7861=_0x10cf4b['sweepType']===SweepType['HIGH_SWEEP']?_0x12e294(0x169):'long';let _0x38c2c8,_0x331476,_0x159785,_0x3ae0d9;_0x3d7861==='long'?(_0x38c2c8=_0x1487ea-_0x3a38ce['stopTicks']*this[_0x12e294(0x17b)],_0x331476=_0x1487ea+_0x3a38ce[_0x12e294(0x115)]*this[_0x12e294(0x17b)],_0x159785=_0x1487ea+_0x3a38ce['breakevenTicks']*this['tickSize'],_0x3ae0d9=_0x1487ea+_0x3a38ce['trailTriggerTicks']*this['tickSize']):(_0x38c2c8=_0x1487ea+_0x3a38ce[_0x12e294(0x17d)]*this[_0x12e294(0x17b)],_0x331476=_0x1487ea-_0x3a38ce['targetTicks']*this['tickSize'],_0x159785=_0x1487ea-_0x3a38ce['breakevenTicks']*this['tickSize'],_0x3ae0d9=_0x1487ea-_0x3a38ce['trailTriggerTicks']*this['tickSize']);const _0x5ca101=_0x3a38ce['targetTicks']/_0x3a38ce[_0x12e294(0x17d)],_0x280928=Math[_0x12e294(0x181)](0x1,_0x10cf4b[_0x12e294(0x1aa)]*0.5+_0x10cf4b[_0x12e294(0x16f)][_0x12e294(0x1aa)]*0.3+(_0x10cf4b[_0x12e294(0x194)]>1.5?0.2:_0x10cf4b['volumeRatio']*0.1));let _0x511247=SignalStrength[_0x12e294(0x168)];if(_0x280928>=0.8)_0x511247=SignalStrength['VERY_STRONG'];else{if(_0x280928>=0.65)_0x511247=SignalStrength[_0x12e294(0x154)];else{if(_0x280928<0.5)_0x511247=SignalStrength[_0x12e294(0x146)];}}const _0x444401=0.5+(_0x280928-0.5)*0.4,_0x486bba=_0x444401*Math[_0x12e294(0x167)](_0x331476-_0x1487ea)-(0x1-_0x444401)*Math[_0x12e294(0x167)](_0x1487ea-_0x38c2c8);_0x10cf4b[_0x12e294(0x16f)]['lastUsedBarIndex']=_0x5e7564,_0x10cf4b[_0x12e294(0x16f)][_0x12e294(0x171)]=!![],_0x10cf4b['zone'][_0x12e294(0x160)]=new Date(_0x8b7857[_0x12e294(0x184)]),this['lastSignalTime']=Date['now'](),this[_0x12e294(0x193)]['signals']++;const _0xff5c2b={'id':uuidv4(),'timestamp':Date[_0x12e294(0x199)](),'symbol':_0x46a390[_0x12e294(0x114)]('.')[0x0]||_0x46a390,'contractId':_0x46a390,'side':_0x3d7861==='long'?OrderSide[_0x12e294(0x13d)]:OrderSide['ASK'],'direction':_0x3d7861,'strategy':_0x12e294(0x15c),'strength':_0x511247,'edge':_0x486bba,'confidence':_0x280928,'entry':_0x1487ea,'entryPrice':_0x1487ea,'stopLoss':_0x38c2c8,'takeProfit':_0x331476,'riskReward':_0x5ca101,'stopTicks':_0x3a38ce[_0x12e294(0x17d)],'targetTicks':_0x3a38ce['targetTicks'],'breakevenTicks':_0x3a38ce[_0x12e294(0x1a3)],'trailTriggerTicks':_0x3a38ce[_0x12e294(0x13a)],'trailDistanceTicks':_0x3a38ce[_0x12e294(0x161)],'beLevel':_0x159785,'trailTrigger':_0x3ae0d9,'sweepType':_0x10cf4b[_0x12e294(0x185)],'penetrationTicks':_0x10cf4b[_0x12e294(0x18c)],'sweepDurationBars':_0x10cf4b['durationBars'],'sweepQuality':_0x10cf4b['qualityScore'],'volumeRatio':_0x10cf4b[_0x12e294(0x194)],'zoneType':_0x10cf4b['zone']['type'],'zoneLevel':_0x10cf4b['zone'][_0x12e294(0x139)](),'zoneTouches':_0x10cf4b[_0x12e294(0x16f)][_0x12e294(0x155)],'zoneQuality':_0x10cf4b['zone'][_0x12e294(0x1aa)],'expires':Date['now']()+0xea60};return this['emit'](_0x12e294(0x121),{'side':_0x3d7861===_0x12e294(0x1a8)?_0x12e294(0x151):'sell','action':_0x12e294(0x123),'reason':'2B\x20'+_0x10cf4b['sweepType']+_0x12e294(0x130)+_0x10cf4b['penetrationTicks']['toFixed'](0x1)+'t\x20|\x20Vol:'+_0x10cf4b['volumeRatio']['toFixed'](0x1)+_0x12e294(0x198)+(_0x10cf4b['qualityScore']*0x64)[_0x12e294(0x192)](0x0)+'%',..._0xff5c2b}),this['emit'](_0x12e294(0x1ad),{'type':_0x12e294(0x187),'message':'[HQX-2B]\x20SIGNAL:\x20'+_0x3d7861[_0x12e294(0x15a)]()+_0x12e294(0x172)+_0x1487ea['toFixed'](0x2)+_0x12e294(0x127)+_0x10cf4b['sweepType']+_0x12e294(0x130)+_0x10cf4b['penetrationTicks'][_0x12e294(0x192)](0x1)+'t\x20Vol:'+_0x10cf4b[_0x12e294(0x194)]['toFixed'](0x1)+'x\x20|\x20Conf:'+(_0x280928*0x64)['toFixed'](0x0)+'%'}),_0xff5c2b;}[_0x3c2c79(0x17f)](_0x148f90,_0x38363f){const _0x5cdd8f=_0x3c2c79,_0x44cbcc=this[_0x5cdd8f(0x117)][_0x5cdd8f(0x14d)](_0x148f90)||[],_0x7c10e7=this[_0x5cdd8f(0x13b)]['get'](_0x148f90)||[],_0x25dd0c=this[_0x5cdd8f(0x17e)][_0x5cdd8f(0x14d)](_0x148f90)||[];if(_0x44cbcc[_0x5cdd8f(0x197)]<0x5)return{'ready':![],'message':_0x5cdd8f(0x16c)+_0x44cbcc[_0x5cdd8f(0x197)]+_0x5cdd8f(0x124)};const _0x2ff932=_0x7c10e7[_0x5cdd8f(0x18d)](_0x4d7d2a=>({'zone':_0x4d7d2a,'distance':Math['abs'](_0x38363f-_0x4d7d2a[_0x5cdd8f(0x139)]())}))[_0x5cdd8f(0x190)]((_0x19f3d4,_0x2b6c91)=>_0x19f3d4['distance']-_0x2b6c91[_0x5cdd8f(0x152)]),_0xacfc44=_0x2ff932[_0x5cdd8f(0x14e)](_0x17a28d=>_0x17a28d[_0x5cdd8f(0x16f)][_0x5cdd8f(0x145)]===ZoneType['RESISTANCE']),_0x34cc80=_0x2ff932[_0x5cdd8f(0x14e)](_0x203c43=>_0x203c43['zone'][_0x5cdd8f(0x145)]===ZoneType['SUPPORT']);return{'ready':!![],'barsProcessed':_0x44cbcc[_0x5cdd8f(0x197)],'swingsDetected':_0x25dd0c[_0x5cdd8f(0x197)],'activeZones':_0x7c10e7['length'],'nearestResistance':_0xacfc44?_0xacfc44[_0x5cdd8f(0x16f)]['getLevel']():null,'nearestSupport':_0x34cc80?_0x34cc80['zone']['getLevel']():null,'stopTicks':this[_0x5cdd8f(0x128)][_0x5cdd8f(0x18e)][_0x5cdd8f(0x17d)],'targetTicks':this[_0x5cdd8f(0x128)]['execution'][_0x5cdd8f(0x115)],'strategy':_0x5cdd8f(0x156)};}[_0x3c2c79(0x173)](_0x41d059){const _0xc6178f=_0x3c2c79;this[_0xc6178f(0x15b)][_0xc6178f(0x120)]({'netPnl':_0x41d059,'timestamp':Date['now']()});if(this['recentTrades']['length']>0x64)this['recentTrades'][_0xc6178f(0x135)]();_0x41d059>0x0?this['stats'][_0xc6178f(0x1a9)]++:this[_0xc6178f(0x193)]['losses']++,this['stats']['trades']++,this[_0xc6178f(0x193)]['pnl']+=_0x41d059,this['emit']('log',{'type':_0xc6178f(0x177),'message':'[HQX-2B]\x20Trade\x20result:\x20'+(_0x41d059>0x0?_0xc6178f(0x119):_0xc6178f(0x162))+'\x20$'+_0x41d059['toFixed'](0x2)});}['getBarHistory'](_0x24aeff){return this['barHistory']['get'](_0x24aeff)||[];}[_0x3c2c79(0x17c)](){return this['stats'];}[_0x3c2c79(0x18b)](_0x2af4f3){const _0x20a135=_0x3c2c79,_0xf3be6e=this[_0x20a135(0x117)]['get'](_0x2af4f3)||[],_0x20f361=this[_0x20a135(0x13b)][_0x20a135(0x14d)](_0x2af4f3)||[],_0x4a2ef7=this['swingPoints']['get'](_0x2af4f3)||[],_0x53eda4=this['currentBar'][_0x20a135(0x14d)](_0x2af4f3),_0x1bf284=_0xf3be6e[_0xf3be6e['length']-0x1],_0x2d0b8d=_0x1bf284?Date['now']()-_0x1bf284['timestamp']:null,_0x1c22ed=_0x20f361[_0x20a135(0x11c)](_0x138bfa=>_0x138bfa['type']===ZoneType['RESISTANCE'])['length'],_0x2a363f=_0x20f361['filter'](_0x5d761c=>_0x5d761c['type']===ZoneType['SUPPORT'])['length'];return{'healthy':_0xf3be6e[_0x20a135(0x197)]>=0x5,'barsTotal':_0xf3be6e['length'],'barsLast5Min':_0xf3be6e[_0x20a135(0x11c)](_0x5aca2d=>Date['now']()-_0x5aca2d['timestamp']<0x5*0x3c*0x3e8)['length'],'swingsTotal':_0x4a2ef7[_0x20a135(0x197)],'zonesResistance':_0x1c22ed,'zonesSupport':_0x2a363f,'zonesTotal':_0x20f361['length'],'currentBarTicks':_0x53eda4?_0x53eda4[_0x20a135(0x134)]:0x0,'isAggregating':_0x53eda4&&_0x53eda4[_0x20a135(0x134)]>0x0,'timeSinceLastBarMs':_0x2d0b8d,'lastSignalTime':this[_0x20a135(0x150)],'signalCooldownMs':this[_0x20a135(0x128)][_0x20a135(0x18e)]['cooldownMs'],'uptime':Date['now']()-(this['startTime']||Date['now']())};}['reset'](_0x204b27){const _0x2fe758=_0x3c2c79;this[_0x2fe758(0x117)][_0x2fe758(0x19f)](_0x204b27,[]),this[_0x2fe758(0x17e)]['set'](_0x204b27,[]),this[_0x2fe758(0x13b)]['set'](_0x204b27,[]),this[_0x2fe758(0x158)]['set'](_0x204b27,[]),this[_0x2fe758(0x13f)][_0x2fe758(0x188)](_0x204b27),this[_0x2fe758(0x1a2)](_0x2fe758(0x1ad),{'type':'info','message':'[HQX-2B]\x20Reset\x20state\x20for\x20'+_0x204b27});}['preloadBars'](_0x51174e,_0x50d3c4){const _0x1702ad=_0x3c2c79;if(!_0x50d3c4||_0x50d3c4['length']===0x0){this[_0x1702ad(0x1a2)](_0x1702ad(0x1ad),{'type':'debug','message':'[HQX-2B]\x20No\x20historical\x20bars\x20to\x20preload'});return;}!this[_0x1702ad(0x117)][_0x1702ad(0x1ae)](_0x51174e)&&this['initialize'](_0x51174e);const _0x26b1bc=[..._0x50d3c4]['sort']((_0x49cef0,_0x440a6f)=>_0x49cef0[_0x1702ad(0x184)]-_0x440a6f['timestamp']);this['emit']('log',{'type':'info','message':'[HQX-2B]\x20Preloading\x20'+_0x26b1bc[_0x1702ad(0x197)]+_0x1702ad(0x141)});let _0x46099c=0x0;for(const _0x6a6972 of _0x26b1bc){const _0x2d6015=this[_0x1702ad(0x133)](_0x51174e,_0x6a6972);if(_0x2d6015)_0x46099c++;}const _0x3bdbdc=this['barHistory'][_0x1702ad(0x14d)](_0x51174e)||[],_0x6235e9=this[_0x1702ad(0x17e)]['get'](_0x51174e)||[],_0x3c280b=this[_0x1702ad(0x13b)][_0x1702ad(0x14d)](_0x51174e)||[];this[_0x1702ad(0x1a2)]('log',{'type':'info','message':_0x1702ad(0x19b)+_0x3bdbdc[_0x1702ad(0x197)]+'\x20bars,\x20'+_0x6235e9[_0x1702ad(0x197)]+'\x20swings,\x20'+_0x3c280b[_0x1702ad(0x197)]+'\x20zones'}),_0x46099c>0x0&&this['emit']('log',{'type':'debug','message':'[HQX-2B]\x20'+_0x46099c+_0x1702ad(0x138)}),this[_0x1702ad(0x150)]=0x0;}}function _0x3286(_0x3044e3,_0x56310f){_0x3044e3=_0x3044e3-0x114;const _0x230694=_0x2306();let _0x32866b=_0x230694[_0x3044e3];return _0x32866b;}class HQX2BStrategy extends EventEmitter{constructor(_0x300ae8={}){const _0x5c848d=_0x3c2c79;super(),this[_0x5c848d(0x128)]=_0x300ae8,this[_0x5c848d(0x18a)]=new HQX2BLiquiditySweep(_0x300ae8),this['strategy']['on'](_0x5c848d(0x121),_0x570bcb=>this[_0x5c848d(0x1a2)]('signal',_0x570bcb)),this['strategy']['on'](_0x5c848d(0x1ad),_0x71898a=>this['emit']('log',_0x71898a));}['processTick'](_0x174544){const _0x302f2b=_0x3c2c79;return this[_0x302f2b(0x18a)][_0x302f2b(0x189)](_0x174544);}[_0x3c2c79(0x144)](_0x5c7d9c){const _0x4274bc=_0x3c2c79;return this[_0x4274bc(0x18a)]['onTick'](_0x5c7d9c);}[_0x3c2c79(0x143)](_0x163ba0){const _0x4f4246=_0x3c2c79;return this['strategy'][_0x4f4246(0x143)](_0x163ba0);}['processBar'](_0x1f5bd9,_0x2629d3){return this['strategy']['processBar'](_0x1f5bd9,_0x2629d3);}['initialize'](_0x3d64ff,_0x47305d,_0x604d79){return this['strategy']['initialize'](_0x3d64ff,_0x47305d,_0x604d79);}['getAnalysisState'](_0x5d93d8,_0x5dfcfb){const _0x2ba36d=_0x3c2c79;return this[_0x2ba36d(0x18a)]['getAnalysisState'](_0x5d93d8,_0x5dfcfb);}['recordTradeResult'](_0x3c2dc1){const _0x2cdbd6=_0x3c2c79;return this[_0x2cdbd6(0x18a)]['recordTradeResult'](_0x3c2dc1);}[_0x3c2c79(0x19c)](_0x411477){return this['strategy']['reset'](_0x411477);}['getStats'](){const _0x121bfc=_0x3c2c79;return this[_0x121bfc(0x18a)][_0x121bfc(0x17c)]();}[_0x3c2c79(0x186)](_0x3a9ae0){const _0x683ede=_0x3c2c79;return this[_0x683ede(0x18a)]['getBarHistory'](_0x3a9ae0);}[_0x3c2c79(0x132)](_0x477061,_0x5a6c68){return this['strategy']['preloadBars'](_0x477061,_0x5a6c68);}[_0x3c2c79(0x18b)](_0x450f8e){const _0x2af21b=_0x3c2c79;return this[_0x2af21b(0x18a)]['getHealthStatus'](_0x450f8e);}[_0x3c2c79(0x14a)](_0x4b30fc){return null;}}module[_0x3c2c79(0x15d)]={'HQX2BLiquiditySweep':HQX2BLiquiditySweep,'HQX2BStrategy':HQX2BStrategy,'M2':HQX2BStrategy,'S2':HQX2BLiquiditySweep,'OrderSide':OrderSide,'SignalStrength':SignalStrength,'SweepType':SweepType,'ZoneType':ZoneType,'DEFAULT_CONFIG':DEFAULT_CONFIG};