const _0x387f6b=_0x233b;(function(_0x2261ea,_0x2bcbbd){const _0x53db05=_0x233b,_0x319ece=_0x2261ea();while(!![]){try{const _0x3c9a46=parseInt(_0x53db05(0xb2))/0x1+-parseInt(_0x53db05(0x124))/0x2+-parseInt(_0x53db05(0xc9))/0x3*(parseInt(_0x53db05(0x123))/0x4)+-parseInt(_0x53db05(0xea))/0x5*(-parseInt(_0x53db05(0x116))/0x6)+-parseInt(_0x53db05(0xf3))/0x7*(parseInt(_0x53db05(0xd6))/0x8)+parseInt(_0x53db05(0x109))/0x9*(parseInt(_0x53db05(0xb5))/0xa)+-parseInt(_0x53db05(0xfc))/0xb;if(_0x3c9a46===_0x2bcbbd)break;else _0x319ece['push'](_0x319ece['shift']());}catch(_0x1b371b){_0x319ece['push'](_0x319ece['shift']());}}}(_0x2ecc,0xe2df0));function _0x233b(_0x4c82d6,_0x328663){_0x4c82d6=_0x4c82d6-0x93;const _0x2ecc7e=_0x2ecc();let _0x233ba5=_0x2ecc7e[_0x4c82d6];return _0x233ba5;}const EventEmitter=require('events'),{v4:uuidv4}=require('uuid'),OrderSide={'BID':0x0,'ASK':0x1},SignalStrength={'WEAK':0x1,'MODERATE':0x2,'STRONG':0x3,'VERY_STRONG':0x4},SweepType={'HIGH_SWEEP':'high','LOW_SWEEP':_0x387f6b(0xb6)},ZoneType={'RESISTANCE':'resistance','SUPPORT':'support'},DEFAULT_CONFIG={'tickSize':0.25,'tickValue':0x5,'swing':{'lookbackBars':0x1,'minStrength':0x1,'confirmationBars':0x1},'zone':{'clusterToleranceTicks':0x8,'minTouches':0x1,'maxZoneAgeBars':0x1f4,'maxZoneDistanceTicks':0x50,'cooldownBars':0x3},'sweep':{'minPenetrationTicks':0.25,'maxPenetrationTicks':0x14,'maxDurationBars':0xa,'minQualityScore':0.1,'minVolumeRatio':0.3,'minBodyRatio':0.05},'execution':{'stopTicks':0xa,'targetTicks':0x28,'breakevenTicks':0x4,'trailTriggerTicks':0x8,'trailDistanceTicks':0x4,'cooldownMs':0x1388,'minHoldTimeMs':0x1388,'slippageTicks':0x1,'commissionPerSide':0x2},'session':{'enabled':![],'startHour':0x9,'startMinute':0x1e,'endHour':0x10,'endMinute':0x0,'timezone':_0x387f6b(0x10b)}};class SwingPoint{constructor(_0x4b5dc1,_0x48923a,_0x559ed9,_0x22313a,_0x13c5e4=0x1){const _0x287264=_0x387f6b;this['type']=_0x4b5dc1,this['price']=_0x48923a,this['barIndex']=_0x559ed9,this['timestamp']=_0x22313a,this[_0x287264(0xcd)]=_0x13c5e4;}}class LiquidityZone{constructor(_0xe51a62,_0x52ddb0,_0x3b41df,_0x1ce3c3,_0x302dc7){const _0x1d85e2=_0x387f6b;this['id']=uuidv4(),this['type']=_0xe51a62,this['priceHigh']=_0x52ddb0,this[_0x1d85e2(0x100)]=_0x3b41df,this[_0x1d85e2(0xba)]=_0x1ce3c3,this['barIndex']=_0x302dc7,this['touches']=0x1,this['swept']=![],this[_0x1d85e2(0x96)]=null,this['lastUsedBarIndex']=-0x3e7,this['qualityScore']=0.5;}[_0x387f6b(0xab)](_0x457a4f,_0x458a03,_0x4b79cf){const _0x27769a=_0x387f6b,_0x411e33=_0x458a03*_0x4b79cf;return _0x457a4f>=this[_0x27769a(0x100)]-_0x411e33&&_0x457a4f<=this[_0x27769a(0xb7)]+_0x411e33;}['getLevel'](){const _0x23a498=_0x387f6b;return(this['priceHigh']+this[_0x23a498(0x100)])/0x2;}}class SweepEvent{constructor(_0x213d6b,_0x5aecd9,_0x3a0ba8,_0x5189fb,_0x51c6ba){const _0x28ae01=_0x387f6b;this[_0x28ae01(0x11c)]=_0x213d6b,this[_0x28ae01(0x105)]=_0x5aecd9,this['entryBarIndex']=_0x3a0ba8,this['extremeBarIndex']=_0x5189fb,this['extremePrice']=_0x51c6ba,this[_0x28ae01(0xb4)]=null,this['isValid']=![],this['qualityScore']=0x0,this[_0x28ae01(0xa3)]=0x0,this[_0x28ae01(0xd2)]=0x0,this[_0x28ae01(0x9d)]=0x1;}}class HQX2BLiquiditySweep extends EventEmitter{constructor(_0x12bbba={}){const _0x406e05=_0x387f6b;super(),this['config']=this['_mergeConfig'](DEFAULT_CONFIG,_0x12bbba),this[_0x406e05(0x11d)]=this['config'][_0x406e05(0x11d)],this['tickValue']=this[_0x406e05(0xbd)]['tickValue'],this['barHistory']=new Map(),this[_0x406e05(0xe7)]=new Map(),this[_0x406e05(0xf1)]=new Map(),this['activeSweeps']=new Map(),this[_0x406e05(0xac)]=new Map(),this[_0x406e05(0xc0)]=0xea60,this[_0x406e05(0xd4)]=0x0,this[_0x406e05(0xe5)]=Date['now'](),this[_0x406e05(0x127)]={'signals':0x0,'trades':0x0,'wins':0x0,'losses':0x0,'pnl':0x0},this[_0x406e05(0xfb)]=[];}[_0x387f6b(0x11a)](_0xb5822d,_0x6d6b7e){const _0x1efdcf=_0x387f6b,_0x42a373={..._0xb5822d};for(const _0x72e6df in _0x6d6b7e){typeof _0x6d6b7e[_0x72e6df]===_0x1efdcf(0xc2)&&!Array[_0x1efdcf(0x113)](_0x6d6b7e[_0x72e6df])?_0x42a373[_0x72e6df]={..._0xb5822d[_0x72e6df],..._0x6d6b7e[_0x72e6df]}:_0x42a373[_0x72e6df]=_0x6d6b7e[_0x72e6df];}return _0x42a373;}[_0x387f6b(0x10f)](_0xf288be){const _0xa59c71=_0x387f6b;if(!this['config']['session'][_0xa59c71(0xd9)])return!![];const _0x59eb9a=new Date(_0xf288be),_0x101cfb=this[_0xa59c71(0xee)](_0x59eb9a)?-0x4:-0x5,_0x3c1acb=_0x59eb9a[_0xa59c71(0xf2)](),_0x410118=_0x59eb9a['getUTCMinutes'](),_0x5401c4=(_0x3c1acb+_0x101cfb+0x18)%0x18,{startHour:_0x29f0f5,startMinute:_0x39f2db,endHour:_0x588961,endMinute:_0x12b541}=this['config']['session'],_0x55c322=_0x5401c4*0x3c+_0x410118,_0x171ba0=_0x29f0f5*0x3c+_0x39f2db,_0xf9c212=_0x588961*0x3c+_0x12b541;return _0x55c322>=_0x171ba0&&_0x55c322<_0xf9c212;}[_0x387f6b(0xee)](_0x42ff52){const _0x96ebdd=_0x387f6b,_0x20e6eb=new Date(_0x42ff52[_0x96ebdd(0xe0)](),0x0,0x1),_0x47feb2=new Date(_0x42ff52['getFullYear'](),0x6,0x1),_0x28c054=Math['max'](_0x20e6eb['getTimezoneOffset'](),_0x47feb2[_0x96ebdd(0x114)]());return _0x42ff52['getTimezoneOffset']()<_0x28c054;}['initialize'](_0x4ab254,_0x33ed2d=0.25,_0x3cace4=0x5){const _0x425d80=_0x387f6b;this['tickSize']=_0x33ed2d,this['tickValue']=_0x3cace4,this[_0x425d80(0xbd)]['tickSize']=_0x33ed2d,this['config']['tickValue']=_0x3cace4,this['barHistory']['set'](_0x4ab254,[]),this[_0x425d80(0xe7)][_0x425d80(0xd0)](_0x4ab254,[]),this['liquidityZones']['set'](_0x4ab254,[]),this['activeSweeps']['set'](_0x4ab254,[]),this['currentBar']['delete'](_0x4ab254),this[_0x425d80(0xfd)](_0x425d80(0xbf),{'type':'info','message':'[HQX-2B]\x20Initialized\x20for\x20'+_0x4ab254+_0x425d80(0xfe)+_0x33ed2d+_0x425d80(0x11f)+_0x3cace4+_0x425d80(0x110)}),this[_0x425d80(0xfd)]('log',{'type':_0x425d80(0xa8),'message':'[HQX-2B]\x20Params:\x20Stop='+this[_0x425d80(0xbd)][_0x425d80(0xdd)][_0x425d80(0x117)]+'t,\x20Target='+this[_0x425d80(0xbd)]['execution']['targetTicks']+_0x425d80(0x10c)+this['config']['execution']['breakevenTicks']+'t,\x20Trail='+this['config']['execution'][_0x425d80(0x122)]+'/'+this['config']['execution']['trailDistanceTicks']});}['processTick'](_0x3310d9){const _0x407299=_0x387f6b,{contractId:_0x1a87ac,price:_0x101777,volume:_0xdd0492,timestamp:_0x23df41}=_0x3310d9,_0x54d631=_0x23df41||Date['now'](),_0x5c80d0=_0xdd0492||0x1;if(!this[_0x407299(0x10f)](_0x54d631))return null;let _0x314581=this['currentBar']['get'](_0x1a87ac);const _0xc8943b=Math[_0x407299(0xdf)](_0x54d631/this[_0x407299(0xc0)])*this['barIntervalMs'];if(!_0x314581||_0x314581[_0x407299(0xe5)]!==_0xc8943b){if(_0x314581){const _0x48c446={'timestamp':_0x314581['startTime'],'open':_0x314581['open'],'high':_0x314581['high'],'low':_0x314581[_0x407299(0xb6)],'close':_0x314581['close'],'volume':_0x314581[_0x407299(0x9c)]},_0xd0df2=this['processBar'](_0x1a87ac,_0x48c446);return this['currentBar'][_0x407299(0xd0)](_0x1a87ac,{'startTime':_0xc8943b,'open':_0x101777,'high':_0x101777,'low':_0x101777,'close':_0x101777,'volume':_0x5c80d0}),_0xd0df2;}else return this[_0x407299(0xac)][_0x407299(0xd0)](_0x1a87ac,{'startTime':_0xc8943b,'open':_0x101777,'high':_0x101777,'low':_0x101777,'close':_0x101777,'volume':_0x5c80d0}),null;}else return _0x314581[_0x407299(0xca)]=Math['max'](_0x314581['high'],_0x101777),_0x314581['low']=Math['min'](_0x314581[_0x407299(0xb6)],_0x101777),_0x314581['close']=_0x101777,_0x314581['volume']+=_0x5c80d0,null;}[_0x387f6b(0xff)](_0xc95c84){const _0x28bb76=_0x387f6b;return this[_0x28bb76(0x115)](_0xc95c84);}[_0x387f6b(0xcf)](_0x1e44a5){const _0x384800=_0x387f6b;return this['processTick']({'contractId':_0x1e44a5[_0x384800(0x108)]||_0x1e44a5['symbol'],'price':_0x1e44a5[_0x384800(0xc6)],'volume':_0x1e44a5[_0x384800(0x11e)]||_0x1e44a5['volume']||0x1,'timestamp':_0x1e44a5['timestamp']||Date[_0x384800(0x94)]()});}[_0x387f6b(0xbe)](_0x32e001,_0x13aa2a){const _0x3f2dac=_0x387f6b;let _0x4d9d9d=this[_0x3f2dac(0xb3)]['get'](_0x32e001);!_0x4d9d9d&&(this['initialize'](_0x32e001),_0x4d9d9d=this['barHistory'][_0x3f2dac(0xc7)](_0x32e001));_0x4d9d9d[_0x3f2dac(0xbb)](_0x13aa2a);if(_0x4d9d9d['length']>0x1f4)_0x4d9d9d['shift']();const _0xf7d97e=_0x4d9d9d[_0x3f2dac(0x9a)]-0x1;if(_0x4d9d9d['length']<this['config'][_0x3f2dac(0xae)][_0x3f2dac(0x107)]*0x3)return null;const _0x575647=this['swingPoints'][_0x3f2dac(0xc7)](_0x32e001)['length'];this[_0x3f2dac(0x99)](_0x32e001,_0x4d9d9d,_0xf7d97e);const _0x3efde8=this[_0x3f2dac(0xe7)][_0x3f2dac(0xc7)](_0x32e001);if(_0x3efde8['length']>_0x575647){const _0x14d9d1=_0x3efde8[_0x3efde8['length']-0x1];this[_0x3f2dac(0xfd)](_0x3f2dac(0xbf),{'type':_0x3f2dac(0xf8),'message':'[2B]\x20NEW\x20SWING\x20'+_0x14d9d1[_0x3f2dac(0xa7)]['toUpperCase']()+_0x3f2dac(0x120)+_0x14d9d1[_0x3f2dac(0xc6)]['toFixed'](0x2)+_0x3f2dac(0x118)+_0x3efde8['length']});}const _0x5db259=this['_detectSweep'](_0x32e001,_0x4d9d9d,_0xf7d97e);_0x5db259&&this['emit'](_0x3f2dac(0xbf),{'type':'debug','message':_0x3f2dac(0xdb)+_0x5db259['sweepType']+_0x3f2dac(0x112)+_0x5db259[_0x3f2dac(0xb0)]+_0x3f2dac(0xb1)+_0x5db259[_0x3f2dac(0xa3)]['toFixed'](0x1)+_0x3f2dac(0xad)+(_0x5db259['qualityScore']*0x64)[_0x3f2dac(0x10e)](0x0)+'%'});const _0x2b699b=this[_0x3f2dac(0xf1)][_0x3f2dac(0xc7)](_0x32e001)[_0x3f2dac(0x9a)];this[_0x3f2dac(0xc4)](_0x32e001,_0xf7d97e);const _0x2a1e3e=this['liquidityZones'][_0x3f2dac(0xc7)](_0x32e001);if(_0x2a1e3e['length']>_0x2b699b){const _0x1416a3=_0x2a1e3e[_0x2a1e3e[_0x3f2dac(0x9a)]-0x1];this[_0x3f2dac(0xfd)]('log',{'type':_0x3f2dac(0xf8),'message':_0x3f2dac(0xa2)+_0x1416a3[_0x3f2dac(0xa7)][_0x3f2dac(0xeb)]()+'\x20@\x20'+_0x1416a3[_0x3f2dac(0xde)]()[_0x3f2dac(0x10e)](0x2)+_0x3f2dac(0x118)+_0x2a1e3e['length']});}if(_0x5db259&&_0x5db259['isValid']){this['emit']('log',{'type':'debug','message':'[2B]\x20Calling\x20_generateSignal\x20for\x20'+_0x5db259['sweepType']+'\x20sweep...'});const _0x186e07=this['_generateSignal'](_0x32e001,_0x13aa2a,_0xf7d97e,_0x5db259);return!_0x186e07&&this[_0x3f2dac(0xfd)]('log',{'type':'debug','message':'[2B]\x20_generateSignal\x20returned\x20null\x20(likely\x20cooldown)'}),_0x186e07;}return null;}['_detectSwings'](_0x23199f,_0x54157a,_0x35607f){const _0x36e0e2=_0x387f6b,_0x1802d1=this[_0x36e0e2(0xbd)]['swing'][_0x36e0e2(0x107)],_0x56b0e9=this['config'][_0x36e0e2(0xae)][_0x36e0e2(0xf0)];if(_0x35607f<_0x1802d1*0x2)return;const _0x5b5953=this['swingPoints']['get'](_0x23199f),_0x5062b4=_0x35607f-_0x1802d1,_0x4874fb=_0x54157a[_0x5062b4];let _0x6f3591=!![],_0x2e413d=0x0;for(let _0x26c3e8=_0x5062b4-_0x1802d1;_0x26c3e8<=_0x5062b4+_0x1802d1;_0x26c3e8++){if(_0x26c3e8===_0x5062b4||_0x26c3e8<0x0||_0x26c3e8>=_0x54157a['length'])continue;if(_0x54157a[_0x26c3e8]['high']>=_0x4874fb['high']){_0x6f3591=![];break;}_0x2e413d++;}if(_0x6f3591&&_0x2e413d>=_0x56b0e9){const _0x12f9ce=_0x5b5953['find'](_0x3ff212=>_0x3ff212['barIndex']===_0x5062b4&&_0x3ff212[_0x36e0e2(0xa7)]===_0x36e0e2(0xca));!_0x12f9ce&&_0x5b5953['push'](new SwingPoint(_0x36e0e2(0xca),_0x4874fb[_0x36e0e2(0xca)],_0x5062b4,_0x4874fb['timestamp'],_0x2e413d));}let _0x52fd30=!![],_0x463e6a=0x0;for(let _0x4f0329=_0x5062b4-_0x1802d1;_0x4f0329<=_0x5062b4+_0x1802d1;_0x4f0329++){if(_0x4f0329===_0x5062b4||_0x4f0329<0x0||_0x4f0329>=_0x54157a[_0x36e0e2(0x9a)])continue;if(_0x54157a[_0x4f0329]['low']<=_0x4874fb[_0x36e0e2(0xb6)]){_0x52fd30=![];break;}_0x463e6a++;}if(_0x52fd30&&_0x463e6a>=_0x56b0e9){const _0x47f004=_0x5b5953[_0x36e0e2(0xc3)](_0x493e58=>_0x493e58['barIndex']===_0x5062b4&&_0x493e58[_0x36e0e2(0xa7)]==='low');!_0x47f004&&_0x5b5953[_0x36e0e2(0xbb)](new SwingPoint(_0x36e0e2(0xb6),_0x4874fb['low'],_0x5062b4,_0x4874fb['timestamp'],_0x463e6a));}const _0x50b240=this['config']['zone']['maxZoneAgeBars'];while(_0x5b5953[_0x36e0e2(0x9a)]>0x0&&_0x5b5953[0x0]['barIndex']<_0x35607f-_0x50b240){_0x5b5953[_0x36e0e2(0x104)]();}}['_updateZones'](_0x2a2c4d,_0xe55dbd){const _0x362870=_0x387f6b,_0x5a3771=this['swingPoints']['get'](_0x2a2c4d),_0x148b42=this[_0x362870(0xf1)]['get'](_0x2a2c4d),_0x28e386=this[_0x362870(0xbd)]['zone'][_0x362870(0x119)]*this[_0x362870(0x11d)],_0x5450ab=this[_0x362870(0xbd)]['zone']['maxZoneAgeBars'];for(let _0x16cab6=_0x148b42['length']-0x1;_0x16cab6>=0x0;_0x16cab6--){_0xe55dbd-_0x148b42[_0x16cab6][_0x362870(0xcc)]>_0x5450ab&&_0x148b42['splice'](_0x16cab6,0x1);}for(const _0x283af2 of _0x5a3771){let _0x529a4a=null;for(const _0x568307 of _0x148b42){if(_0x568307['containsPrice'](_0x283af2[_0x362870(0xc6)],this['config'][_0x362870(0x105)][_0x362870(0x119)],this[_0x362870(0x11d)])){_0x529a4a=_0x568307;break;}}if(_0x529a4a){_0x529a4a['touches']++;if(_0x283af2[_0x362870(0xc6)]>_0x529a4a[_0x362870(0xb7)])_0x529a4a['priceHigh']=_0x283af2['price'];if(_0x283af2[_0x362870(0xc6)]<_0x529a4a[_0x362870(0x100)])_0x529a4a['priceLow']=_0x283af2[_0x362870(0xc6)];_0x529a4a['qualityScore']=Math[_0x362870(0xbc)](0x1,0.3+_0x529a4a[_0x362870(0x93)]*0.15);}else{const _0xee0c5b=_0x283af2[_0x362870(0xa7)]===_0x362870(0xca)?ZoneType['RESISTANCE']:ZoneType['SUPPORT'],_0x14b0bb=new LiquidityZone(_0xee0c5b,_0x283af2['price']+_0x28e386/0x2,_0x283af2['price']-_0x28e386/0x2,_0x283af2['timestamp'],_0x283af2['barIndex']);_0x14b0bb['qualityScore']=0.3+_0x283af2[_0x362870(0xcd)]*0.1,_0x148b42['push'](_0x14b0bb);}}}['_detectSweep'](_0x56d127,_0x12ae8d,_0x211094){const _0x5b49b2=_0x387f6b,_0x5e9da4=this[_0x5b49b2(0xf1)]['get'](_0x56d127),_0x3d1c22=_0x12ae8d[_0x211094],_0x373c5d=_0x3d1c22[_0x5b49b2(0xf7)],_0x4196ce=this['config']['sweep'],_0x41f67b=this['config']['zone'];for(const _0x178fd0 of _0x5e9da4){if(_0x178fd0['lastUsedBarIndex']>=0x0&&_0x211094-_0x178fd0[_0x5b49b2(0x95)]<_0x41f67b['cooldownBars'])continue;const _0x39a4aa=_0x178fd0[_0x5b49b2(0xde)](),_0x258b68=Math['abs'](_0x373c5d-_0x39a4aa)/this['tickSize'];if(_0x258b68>_0x41f67b[_0x5b49b2(0xe1)])continue;const _0x5610ca=Math['max'](0x0,_0x211094-_0x4196ce[_0x5b49b2(0x126)]*0x2);for(let _0x32c0f6=_0x5610ca;_0x32c0f6<_0x211094;_0x32c0f6++){const _0x7ea897=_0x12ae8d[_0x32c0f6];if(_0x178fd0[_0x5b49b2(0xa7)]===ZoneType[_0x5b49b2(0xa0)]){const _0x3d533d=(_0x7ea897[_0x5b49b2(0xca)]-_0x178fd0['priceHigh'])/this['tickSize'];if(_0x3d533d>=_0x4196ce['minPenetrationTicks']&&_0x3d533d<=_0x4196ce[_0x5b49b2(0xb8)]){if(_0x373c5d<_0x178fd0[_0x5b49b2(0xb7)]){const _0x247752=_0x7ea897['high']-_0x7ea897['low'],_0x33cd8a=Math[_0x5b49b2(0x97)](_0x7ea897['close']-_0x7ea897[_0x5b49b2(0xf4)]),_0x589423=_0x247752>0x0?_0x33cd8a/_0x247752:0x0;if(_0x589423>=_0x4196ce[_0x5b49b2(0xcb)]){const _0x43c536=this[_0x5b49b2(0x102)](_0x12ae8d,_0x32c0f6,0x14);if(_0x43c536>=_0x4196ce['minVolumeRatio']){const _0x1402af=new SweepEvent(SweepType['HIGH_SWEEP'],_0x178fd0,_0x32c0f6,_0x32c0f6,_0x7ea897[_0x5b49b2(0xca)]);_0x1402af[_0x5b49b2(0xb4)]=_0x211094,_0x1402af[_0x5b49b2(0xa3)]=_0x3d533d,_0x1402af['durationBars']=_0x211094-_0x32c0f6,_0x1402af[_0x5b49b2(0x9d)]=_0x43c536,_0x1402af[_0x5b49b2(0xf9)]=this[_0x5b49b2(0xa5)](_0x1402af,_0x589423),_0x1402af[_0x5b49b2(0xb0)]=_0x1402af['qualityScore']>=_0x4196ce[_0x5b49b2(0x10d)];if(_0x1402af['isValid'])return _0x1402af;}}}}}if(_0x178fd0[_0x5b49b2(0xa7)]===ZoneType['SUPPORT']){const _0x21a81d=(_0x178fd0[_0x5b49b2(0x100)]-_0x7ea897['low'])/this['tickSize'];if(_0x21a81d>=_0x4196ce['minPenetrationTicks']&&_0x21a81d<=_0x4196ce[_0x5b49b2(0xb8)]){if(_0x373c5d>_0x178fd0[_0x5b49b2(0x100)]){const _0x1941bd=_0x7ea897[_0x5b49b2(0xca)]-_0x7ea897['low'],_0x3dd231=Math['abs'](_0x7ea897['close']-_0x7ea897[_0x5b49b2(0xf4)]),_0x5640dc=_0x1941bd>0x0?_0x3dd231/_0x1941bd:0x0;if(_0x5640dc>=_0x4196ce[_0x5b49b2(0xcb)]){const _0x2f7b88=this[_0x5b49b2(0x102)](_0x12ae8d,_0x32c0f6,0x14);if(_0x2f7b88>=_0x4196ce[_0x5b49b2(0xa1)]){const _0x5092a9=new SweepEvent(SweepType[_0x5b49b2(0xc1)],_0x178fd0,_0x32c0f6,_0x32c0f6,_0x7ea897['low']);_0x5092a9['exitBarIndex']=_0x211094,_0x5092a9[_0x5b49b2(0xa3)]=_0x21a81d,_0x5092a9['durationBars']=_0x211094-_0x32c0f6,_0x5092a9[_0x5b49b2(0x9d)]=_0x2f7b88,_0x5092a9['qualityScore']=this['_scoreSweep'](_0x5092a9,_0x5640dc),_0x5092a9['isValid']=_0x5092a9[_0x5b49b2(0xf9)]>=_0x4196ce['minQualityScore'];if(_0x5092a9[_0x5b49b2(0xb0)])return _0x5092a9;}}}}}}}return null;}[_0x387f6b(0x102)](_0x321f59,_0x2c8ad6,_0x53ed05){const _0x2b3cbc=_0x387f6b,_0x598ac4=Math['max'](0x0,_0x2c8ad6-_0x53ed05),_0x50d8b9=_0x321f59[_0x2b3cbc(0x9f)](_0x598ac4,_0x2c8ad6);if(_0x50d8b9[_0x2b3cbc(0x9a)]===0x0)return 0x1;const _0x5654bc=_0x50d8b9[_0x2b3cbc(0xaf)](_0x522589=>_0x522589[_0x2b3cbc(0x9c)])['sort']((_0x5c5aaa,_0x486ce6)=>_0x5c5aaa-_0x486ce6),_0x43e2fa=Math[_0x2b3cbc(0xdf)](_0x5654bc['length']/0x2),_0x203725=_0x5654bc[_0x43e2fa]||0x1;return _0x321f59[_0x2c8ad6]['volume']/_0x203725;}[_0x387f6b(0xa5)](_0x3272dd,_0x14b75a){const _0x3b294f=_0x387f6b;let _0x4a2ad1=0x0;const _0x6d1b68=0x4,_0x4c97f7=Math['abs'](_0x3272dd['penetrationTicks']-_0x6d1b68);return _0x4a2ad1+=Math[_0x3b294f(0x98)](0x0,0.3-_0x4c97f7*0.03),_0x4a2ad1+=Math['max'](0x0,0.25-_0x3272dd['durationBars']*0.05),_0x4a2ad1+=Math['min'](0.25,_0x3272dd[_0x3b294f(0x9d)]*0.1),_0x4a2ad1+=Math[_0x3b294f(0xbc)](0.2,_0x14b75a*0.4),Math[_0x3b294f(0xbc)](0x1,_0x4a2ad1);}['_generateSignal'](_0x211cdf,_0x5b4bd7,_0x369be5,_0x3b5751){const _0x3c9c47=_0x387f6b,_0x292e9b=Date[_0x3c9c47(0x94)]()-this['lastSignalTime'];if(_0x292e9b<this['config'][_0x3c9c47(0xdd)][_0x3c9c47(0xef)])return this['emit']('log',{'type':_0x3c9c47(0xf8),'message':_0x3c9c47(0xa9)+(_0x292e9b/0x3e8)['toFixed'](0x1)+'s\x20<\x20'+this[_0x3c9c47(0xbd)][_0x3c9c47(0xdd)][_0x3c9c47(0xef)]/0x3e8+'s)'}),null;const _0x38a806=this[_0x3c9c47(0xbd)][_0x3c9c47(0xdd)],_0x1ab730=_0x5b4bd7[_0x3c9c47(0xf7)],_0x4d2769=_0x3b5751[_0x3c9c47(0x11c)]===SweepType['HIGH_SWEEP']?'short':_0x3c9c47(0xe4);let _0x853a28,_0x2a12bd,_0x687422,_0x84a97a;_0x4d2769==='long'?(_0x853a28=_0x1ab730-_0x38a806['stopTicks']*this['tickSize'],_0x2a12bd=_0x1ab730+_0x38a806['targetTicks']*this[_0x3c9c47(0x11d)],_0x687422=_0x1ab730+_0x38a806['breakevenTicks']*this['tickSize'],_0x84a97a=_0x1ab730+_0x38a806['trailTriggerTicks']*this[_0x3c9c47(0x11d)]):(_0x853a28=_0x1ab730+_0x38a806[_0x3c9c47(0x117)]*this['tickSize'],_0x2a12bd=_0x1ab730-_0x38a806['targetTicks']*this['tickSize'],_0x687422=_0x1ab730-_0x38a806['breakevenTicks']*this['tickSize'],_0x84a97a=_0x1ab730-_0x38a806['trailTriggerTicks']*this['tickSize']);const _0x3e54d4=_0x38a806[_0x3c9c47(0xdc)]/_0x38a806[_0x3c9c47(0x117)],_0xf9b412=Math['min'](0x1,_0x3b5751['qualityScore']*0.5+_0x3b5751['zone'][_0x3c9c47(0xf9)]*0.3+(_0x3b5751[_0x3c9c47(0x9d)]>1.5?0.2:_0x3b5751['volumeRatio']*0.1));let _0x517e44=SignalStrength[_0x3c9c47(0x9e)];if(_0xf9b412>=0.8)_0x517e44=SignalStrength[_0x3c9c47(0xec)];else{if(_0xf9b412>=0.65)_0x517e44=SignalStrength['STRONG'];else{if(_0xf9b412<0.5)_0x517e44=SignalStrength['WEAK'];}}const _0xe0ea4b=0.5+(_0xf9b412-0.5)*0.4,_0x3aeddf=_0xe0ea4b*Math['abs'](_0x2a12bd-_0x1ab730)-(0x1-_0xe0ea4b)*Math[_0x3c9c47(0x97)](_0x1ab730-_0x853a28);_0x3b5751['zone'][_0x3c9c47(0x95)]=_0x369be5,_0x3b5751['zone'][_0x3c9c47(0x125)]=!![],_0x3b5751['zone']['sweptAt']=new Date(_0x5b4bd7[_0x3c9c47(0xda)]),this['lastSignalTime']=Date[_0x3c9c47(0x94)](),this[_0x3c9c47(0x127)][_0x3c9c47(0xe8)]++;const _0x439d4f={'id':uuidv4(),'timestamp':Date[_0x3c9c47(0x94)](),'symbol':_0x211cdf[_0x3c9c47(0x11b)]('.')[0x0]||_0x211cdf,'contractId':_0x211cdf,'side':_0x4d2769===_0x3c9c47(0xe4)?OrderSide['BID']:OrderSide['ASK'],'direction':_0x4d2769,'strategy':'HQX_2B_LIQUIDITY_SWEEP','strength':_0x517e44,'edge':_0x3aeddf,'confidence':_0xf9b412,'entry':_0x1ab730,'entryPrice':_0x1ab730,'stopLoss':_0x853a28,'takeProfit':_0x2a12bd,'riskReward':_0x3e54d4,'stopTicks':_0x38a806['stopTicks'],'targetTicks':_0x38a806[_0x3c9c47(0xdc)],'breakevenTicks':_0x38a806[_0x3c9c47(0x103)],'trailTriggerTicks':_0x38a806[_0x3c9c47(0x122)],'trailDistanceTicks':_0x38a806['trailDistanceTicks'],'beLevel':_0x687422,'trailTrigger':_0x84a97a,'sweepType':_0x3b5751[_0x3c9c47(0x11c)],'penetrationTicks':_0x3b5751[_0x3c9c47(0xa3)],'sweepDurationBars':_0x3b5751['durationBars'],'sweepQuality':_0x3b5751['qualityScore'],'volumeRatio':_0x3b5751[_0x3c9c47(0x9d)],'zoneType':_0x3b5751['zone']['type'],'zoneLevel':_0x3b5751['zone']['getLevel'](),'zoneTouches':_0x3b5751[_0x3c9c47(0x105)]['touches'],'zoneQuality':_0x3b5751['zone'][_0x3c9c47(0xf9)],'expires':Date[_0x3c9c47(0x94)]()+0xea60};return this['emit'](_0x3c9c47(0xed),{'side':_0x4d2769===_0x3c9c47(0xe4)?'buy':'sell','action':_0x3c9c47(0xf4),'reason':'2B\x20'+_0x3b5751['sweepType']+_0x3c9c47(0xc8)+_0x3b5751[_0x3c9c47(0xa3)]['toFixed'](0x1)+'t\x20|\x20Vol:'+_0x3b5751[_0x3c9c47(0x9d)]['toFixed'](0x1)+_0x3c9c47(0xe6)+(_0x3b5751[_0x3c9c47(0xf9)]*0x64)['toFixed'](0x0)+'%',..._0x439d4f}),this[_0x3c9c47(0xfd)](_0x3c9c47(0xbf),{'type':_0x3c9c47(0xa8),'message':_0x3c9c47(0x101)+_0x4d2769['toUpperCase']()+'\x20@\x20'+_0x1ab730['toFixed'](0x2)+_0x3c9c47(0xd8)+_0x3b5751['sweepType']+_0x3c9c47(0xc8)+_0x3b5751['penetrationTicks']['toFixed'](0x1)+'t\x20Vol:'+_0x3b5751['volumeRatio'][_0x3c9c47(0x10e)](0x1)+'x\x20|\x20Conf:'+(_0xf9b412*0x64)['toFixed'](0x0)+'%'}),_0x439d4f;}[_0x387f6b(0xce)](_0x4aaecb,_0x4c2457){const _0x372f1c=_0x387f6b,_0xb0d065=this['barHistory']['get'](_0x4aaecb)||[],_0x5d9fb9=this['liquidityZones'][_0x372f1c(0xc7)](_0x4aaecb)||[],_0x3b20a9=this['swingPoints'][_0x372f1c(0xc7)](_0x4aaecb)||[];if(_0xb0d065[_0x372f1c(0x9a)]<0x5)return{'ready':![],'message':_0x372f1c(0xa6)+_0xb0d065[_0x372f1c(0x9a)]+'/5\x20bars'};const _0x18f308=_0x5d9fb9['map'](_0x1dee7e=>({'zone':_0x1dee7e,'distance':Math['abs'](_0x4c2457-_0x1dee7e['getLevel']())}))['sort']((_0x5680a2,_0x3bd8b1)=>_0x5680a2[_0x372f1c(0xd7)]-_0x3bd8b1[_0x372f1c(0xd7)]),_0x579774=_0x18f308[_0x372f1c(0xc3)](_0x57b413=>_0x57b413[_0x372f1c(0x105)]['type']===ZoneType['RESISTANCE']),_0x27bf00=_0x18f308['find'](_0x150aa8=>_0x150aa8['zone'][_0x372f1c(0xa7)]===ZoneType[_0x372f1c(0x10a)]);return{'ready':!![],'barsProcessed':_0xb0d065['length'],'swingsDetected':_0x3b20a9[_0x372f1c(0x9a)],'activeZones':_0x5d9fb9[_0x372f1c(0x9a)],'nearestResistance':_0x579774?_0x579774['zone']['getLevel']():null,'nearestSupport':_0x27bf00?_0x27bf00['zone'][_0x372f1c(0xde)]():null,'stopTicks':this['config'][_0x372f1c(0xdd)][_0x372f1c(0x117)],'targetTicks':this['config'][_0x372f1c(0xdd)][_0x372f1c(0xdc)],'strategy':_0x372f1c(0xfa)};}[_0x387f6b(0xaa)](_0x11abdc){const _0x2bf0e9=_0x387f6b;this['recentTrades'][_0x2bf0e9(0xbb)]({'netPnl':_0x11abdc,'timestamp':Date['now']()});if(this[_0x2bf0e9(0xfb)]['length']>0x64)this[_0x2bf0e9(0xfb)][_0x2bf0e9(0x104)]();_0x11abdc>0x0?this[_0x2bf0e9(0x127)]['wins']++:this[_0x2bf0e9(0x127)]['losses']++,this[_0x2bf0e9(0x127)]['trades']++,this['stats']['pnl']+=_0x11abdc,this[_0x2bf0e9(0xfd)](_0x2bf0e9(0xbf),{'type':_0x2bf0e9(0xf8),'message':_0x2bf0e9(0xd1)+(_0x11abdc>0x0?'WIN':_0x2bf0e9(0x9b))+'\x20$'+_0x11abdc[_0x2bf0e9(0x10e)](0x2)});}[_0x387f6b(0xd5)](_0x187b52){const _0x43e375=_0x387f6b;return this['barHistory'][_0x43e375(0xc7)](_0x187b52)||[];}['getStats'](){return this['stats'];}[_0x387f6b(0x106)](_0xd778e4){const _0x8911ac=_0x387f6b,_0x2ba776=this['barHistory']['get'](_0xd778e4)||[],_0x3e47cb=this[_0x8911ac(0xf1)]['get'](_0xd778e4)||[],_0x36bcf8=this[_0x8911ac(0xe7)]['get'](_0xd778e4)||[],_0xbb6624=this['currentBar'][_0x8911ac(0xc7)](_0xd778e4),_0x3ec16a=_0x2ba776[_0x2ba776['length']-0x1],_0x4373e3=_0x3ec16a?Date[_0x8911ac(0x94)]()-_0x3ec16a['timestamp']:null,_0x42b07e=_0x3e47cb[_0x8911ac(0xe9)](_0x5e7a04=>_0x5e7a04[_0x8911ac(0xa7)]===ZoneType[_0x8911ac(0xa0)])[_0x8911ac(0x9a)],_0x490272=_0x3e47cb['filter'](_0x451106=>_0x451106['type']===ZoneType[_0x8911ac(0x10a)])[_0x8911ac(0x9a)];return{'healthy':_0x2ba776['length']>=0x5,'barsTotal':_0x2ba776[_0x8911ac(0x9a)],'barsLast5Min':_0x2ba776[_0x8911ac(0xe9)](_0x2dfb9c=>Date['now']()-_0x2dfb9c['timestamp']<0x5*0x3c*0x3e8)[_0x8911ac(0x9a)],'swingsTotal':_0x36bcf8[_0x8911ac(0x9a)],'zonesResistance':_0x42b07e,'zonesSupport':_0x490272,'zonesTotal':_0x3e47cb[_0x8911ac(0x9a)],'currentBarTicks':_0xbb6624?_0xbb6624['tickCount']:0x0,'isAggregating':_0xbb6624&&_0xbb6624[_0x8911ac(0xe2)]>0x0,'timeSinceLastBarMs':_0x4373e3,'lastSignalTime':this['lastSignalTime'],'signalCooldownMs':this['config']['execution']['cooldownMs'],'uptime':Date['now']()-(this['startTime']||Date[_0x8911ac(0x94)]())};}[_0x387f6b(0x121)](_0x186d87){const _0x3e84e8=_0x387f6b;this[_0x3e84e8(0xb3)]['set'](_0x186d87,[]),this['swingPoints'][_0x3e84e8(0xd0)](_0x186d87,[]),this['liquidityZones'][_0x3e84e8(0xd0)](_0x186d87,[]),this['activeSweeps']['set'](_0x186d87,[]),this['currentBar'][_0x3e84e8(0xc5)](_0x186d87),this['emit'](_0x3e84e8(0xbf),{'type':_0x3e84e8(0xa8),'message':'[HQX-2B]\x20Reset\x20state\x20for\x20'+_0x186d87});}['preloadBars'](_0x40c3d9,_0x22a5e4){const _0x9d4408=_0x387f6b;if(!_0x22a5e4||_0x22a5e4[_0x9d4408(0x9a)]===0x0){this[_0x9d4408(0xfd)](_0x9d4408(0xbf),{'type':_0x9d4408(0xf8),'message':'[HQX-2B]\x20No\x20historical\x20bars\x20to\x20preload'});return;}!this[_0x9d4408(0xb3)]['has'](_0x40c3d9)&&this[_0x9d4408(0xa4)](_0x40c3d9);const _0x5cebb9=[..._0x22a5e4][_0x9d4408(0xd3)]((_0xcf0fbb,_0x3ae055)=>_0xcf0fbb[_0x9d4408(0xda)]-_0x3ae055['timestamp']);this[_0x9d4408(0xfd)]('log',{'type':'info','message':'[HQX-2B]\x20Preloading\x20'+_0x5cebb9[_0x9d4408(0x9a)]+'\x20historical\x20bars...'});let _0x1e8c51=0x0;for(const _0x5ce701 of _0x5cebb9){const _0x6c4c=this[_0x9d4408(0xbe)](_0x40c3d9,_0x5ce701);if(_0x6c4c)_0x1e8c51++;}const _0x38fe86=this[_0x9d4408(0xb3)]['get'](_0x40c3d9)||[],_0x4632db=this['swingPoints']['get'](_0x40c3d9)||[],_0x262366=this[_0x9d4408(0xf1)]['get'](_0x40c3d9)||[];this[_0x9d4408(0xfd)]('log',{'type':'info','message':'[HQX-2B]\x20Preload\x20complete:\x20'+_0x38fe86[_0x9d4408(0x9a)]+_0x9d4408(0x111)+_0x4632db['length']+_0x9d4408(0xf5)+_0x262366[_0x9d4408(0x9a)]+'\x20zones'}),_0x1e8c51>0x0&&this['emit']('log',{'type':'debug','message':_0x9d4408(0xe3)+_0x1e8c51+'\x20historical\x20signals\x20detected\x20(ignored)'}),this['lastSignalTime']=0x0;}}class HQX2BStrategy extends EventEmitter{constructor(_0xa967ca={}){const _0x265f35=_0x387f6b;super(),this['config']=_0xa967ca,this['strategy']=new HQX2BLiquiditySweep(_0xa967ca),this['strategy']['on']('signal',_0x664c32=>this['emit'](_0x265f35(0xed),_0x664c32)),this['strategy']['on']('log',_0x5edac7=>this['emit'](_0x265f35(0xbf),_0x5edac7));}[_0x387f6b(0x115)](_0x481a2f){const _0x9078ca=_0x387f6b;return this[_0x9078ca(0xf6)]['processTick'](_0x481a2f);}[_0x387f6b(0xff)](_0x1ee571){const _0x2d398c=_0x387f6b;return this[_0x2d398c(0xf6)]['onTick'](_0x1ee571);}[_0x387f6b(0xcf)](_0x55dbc8){const _0x44b6ce=_0x387f6b;return this['strategy'][_0x44b6ce(0xcf)](_0x55dbc8);}[_0x387f6b(0xbe)](_0x500248,_0x228e0b){const _0x147f59=_0x387f6b;return this[_0x147f59(0xf6)]['processBar'](_0x500248,_0x228e0b);}[_0x387f6b(0xa4)](_0x244c66,_0x569c09,_0x1dcb3e){const _0x1d7d75=_0x387f6b;return this['strategy'][_0x1d7d75(0xa4)](_0x244c66,_0x569c09,_0x1dcb3e);}[_0x387f6b(0xce)](_0x2b666d,_0x424af3){return this['strategy']['getAnalysisState'](_0x2b666d,_0x424af3);}['recordTradeResult'](_0x291b78){return this['strategy']['recordTradeResult'](_0x291b78);}['reset'](_0x2d1dea){const _0x2dd8f3=_0x387f6b;return this[_0x2dd8f3(0xf6)][_0x2dd8f3(0x121)](_0x2d1dea);}['getStats'](){const _0x179630=_0x387f6b;return this[_0x179630(0xf6)]['getStats']();}['getBarHistory'](_0x1ee70d){const _0x1aeb57=_0x387f6b;return this[_0x1aeb57(0xf6)][_0x1aeb57(0xd5)](_0x1ee70d);}['preloadBars'](_0x2c9a47,_0x570523){return this['strategy']['preloadBars'](_0x2c9a47,_0x570523);}[_0x387f6b(0x106)](_0x645717){const _0x2cd8ae=_0x387f6b;return this[_0x2cd8ae(0xf6)]['getHealthStatus'](_0x645717);}[_0x387f6b(0xb9)](_0x2e00be){return null;}}function _0x2ecc(){const _0x60bc87=['sweptAt','abs','max','_detectSwings','length','LOSS','volume','volumeRatio','MODERATE','slice','RESISTANCE','minVolumeRatio','[2B]\x20NEW\x20ZONE\x20','penetrationTicks','initialize','_scoreSweep','Collecting\x20data...\x20','type','info','[2B]\x20Signal\x20blocked\x20by\x20cooldown\x20(','recordTradeResult','containsPrice','currentBar','t\x20|\x20Q:\x20','swing','map','isValid','\x20|\x20Pen:\x20','1768978TThOoN','barHistory','exitBarIndex','5405830PKUrQS','low','priceHigh','maxPenetrationTicks','generateSignal','createdAt','push','min','config','processBar','log','barIntervalMs','LOW_SWEEP','object','find','_updateZones','delete','price','get','\x20|\x20Pen:','1659702TzocJh','high','minBodyRatio','barIndex','strength','getAnalysisState','onTrade','set','[HQX-2B]\x20Trade\x20result:\x20','durationBars','sort','lastSignalTime','getBarHistory','125336HCyXIr','distance','\x20|\x20','enabled','timestamp','[2B]\x20SWEEP\x20','targetTicks','execution','getLevel','floor','getFullYear','maxZoneDistanceTicks','tickCount','[HQX-2B]\x20','long','startTime','x\x20|\x20Q:','swingPoints','signals','filter','229485KLBQRd','toUpperCase','VERY_STRONG','signal','isDST','cooldownMs','minStrength','liquidityZones','getUTCHours','287WvEpGJ','open','\x20swings,\x20','strategy','close','debug','qualityScore','HQX-2B\x20Liquidity\x20Sweep\x20(Optimized)','recentTrades','362659oCshCj','emit',':\x20tick=','onTick','priceLow','[HQX-2B]\x20SIGNAL:\x20','_getVolumeRatio','breakevenTicks','shift','zone','getHealthStatus','lookbackBars','contractId','9dgwBru','SUPPORT','America/New_York','t,\x20BE=','minQualityScore','toFixed','isWithinSession',',\x20TF=1min','\x20bars,\x20','\x20|\x20Valid:\x20','isArray','getTimezoneOffset','processTick','228pYumOt','stopTicks','\x20|\x20Total:\x20','clusterToleranceTicks','_mergeConfig','split','sweepType','tickSize','size',',\x20value=','\x20@\x20','reset','trailTriggerTicks','12qHQdKe','1578730rTZFcc','swept','maxDurationBars','stats','touches','now','lastUsedBarIndex'];_0x2ecc=function(){return _0x60bc87;};return _0x2ecc();}module['exports']={'HQX2BLiquiditySweep':HQX2BLiquiditySweep,'HQX2BStrategy':HQX2BStrategy,'M2':HQX2BStrategy,'S2':HQX2BLiquiditySweep,'OrderSide':OrderSide,'SignalStrength':SignalStrength,'SweepType':SweepType,'ZoneType':ZoneType,'DEFAULT_CONFIG':DEFAULT_CONFIG};